import{_ as z}from"./CEyFpblA.js";import{e as V,u as S,r as n,A as U,g as B,c as g,a as e,v as N,i as y,B as T,n as i,t as q,x as m,y as p,b as I,w as j,o as b,d as A,z as x,_ as E}from"./CaF1xe-H.js";const M={class:"flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8"},P={class:"w-full max-w-md space-y-8 bg-white p-8 md:p-10 rounded-lg shadow border border-cream-gray"},D={class:"flex flex-col gap-y-4"},R={class:"mt-2 text-xs text-gray-500 list-disc list-inside space-y-1"},$=["disabled"],H={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3"},L={class:"text-sm text-center"},O=V({__name:"signup",setup(Z){const k=S(),u=n(""),d=n(""),f=n(""),v=n(""),t=n(""),o=n(!1),c=n(!1),l=U({length:!1,uppercase:!1,lowercase:!1,number:!1,symbol:!1}),h=()=>{const a=d.value;l.length=a.length>=8,l.uppercase=/[A-Z]/.test(a),l.lowercase=/[a-z]/.test(a),l.number=/[0-9]/.test(a),l.symbol=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(a)},w=B(()=>Object.values(l).every(Boolean)),_=async()=>{if(d.value!==v.value){t.value="كلمتا المرور غير متطابقتين.",o.value=!0;return}if(!w.value){t.value="الرجاء التأكد من أن كلمة المرور تحقق جميع المعايير المطلوبة.",o.value=!0;return}c.value=!0,t.value="",o.value=!1;const{data:a,error:s}=await k.auth.signUp({email:u.value,password:d.value,options:{data:{full_name:f.value}}});c.value=!1,s?(console.error("Signup Error:",s.message),s.message.includes("password should be at least")?t.value="كلمة المرور ضعيفة جدًا. يرجى اتباع الإرشادات.":t.value=s.message||"حدث خطأ أثناء إنشاء الحساب.",o.value=!0):a.user?a.user.identities&&a.user.identities.length===0?(t.value="تم إرسال رابط التأكيد إلى بريدك الإلكتروني. يرجى التحقق منه لتفعيل حسابك.",o.value=!1):a.session?(t.value="تم إنشاء الحساب وتسجيل الدخول بنجاح!",o.value=!1,setTimeout(()=>x("/profile"),1500)):(t.value="تم إنشاء الحساب بنجاح. قد تحتاج لتأكيد بريدك الإلكتروني.",o.value=!1,setTimeout(()=>x("/confirm?email="+encodeURIComponent(u.value)),2e3)):(t.value="حدث خطأ غير متوقع.",o.value=!0,setTimeout(()=>x("/confirm?email="+encodeURIComponent(u.value)),2e3))};return(a,s)=>{const C=z;return b(),g("div",M,[e("div",P,[s[10]||(s[10]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-brown-dark"}," إنشاء حساب جديد ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:N(_,["prevent"])},[t.value?(b(),g("div",{key:0,class:i([o.value?"text-red-600":"text-green-600","text-center text-sm mb-4 p-2 bg-opacity-10 rounded"]),style:T({backgroundColor:o.value?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)"})},q(t.value),7)):y("",!0),e("div",D,[e("div",null,[s[4]||(s[4]=e("label",{for:"full-name",class:"block text-sm font-medium text-brown-dark mb-1"},"الاسم الكامل",-1)),m(e("input",{id:"full-name",name:"full-name",type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>f.value=r),required:"",class:"relative block w-full appearance-none rounded-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm",placeholder:"أدخل اسمك الكامل"},null,512),[[p,f.value]])]),e("div",null,[s[5]||(s[5]=e("label",{for:"email-address",class:"block text-sm font-medium text-brown-dark mb-1"},"البريد الإلكتروني",-1)),m(e("input",{id:"email-address",name:"email",type:"email","onUpdate:modelValue":s[1]||(s[1]=r=>u.value=r),autocomplete:"email",required:"",class:"relative block w-full appearance-none rounded-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm",placeholder:"أدخل بريدك الإلكتروني"},null,512),[[p,u.value]])]),e("div",null,[s[6]||(s[6]=e("label",{for:"password",class:"block text-sm font-medium text-brown-dark mb-1"},"كلمة المرور",-1)),m(e("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":s[2]||(s[2]=r=>d.value=r),autocomplete:"new-password",required:"",onInput:h,class:"relative block w-full appearance-none rounded-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm",placeholder:"أنشئ كلمة مرور قوية"},null,544),[[p,d.value]]),e("ul",R,[e("li",{class:i({"text-green-600":l.length})},"8 حروف على الأقل",2),e("li",{class:i({"text-green-600":l.uppercase})},"حرف كبير واحد على الأقل",2),e("li",{class:i({"text-green-600":l.lowercase})},"حرف صغير واحد على الأقل",2),e("li",{class:i({"text-green-600":l.number})},"رقم واحد على الأقل",2),e("li",{class:i({"text-green-600":l.symbol})},"رمز واحد على الأقل (مثل @$!%*?&)",2)])]),e("div",null,[s[7]||(s[7]=e("label",{for:"confirm-password",class:"block text-sm font-medium text-brown-dark mb-1"},"تأكيد كلمة المرور",-1)),m(e("input",{id:"confirm-password",name:"confirm-password",type:"password","onUpdate:modelValue":s[3]||(s[3]=r=>v.value=r),autocomplete:"new-password",required:"",class:"relative block w-full appearance-none rounded-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm",placeholder:"أعد كتابة كلمة المرور"},null,512),[[p,v.value]])])]),e("div",null,[e("button",{type:"submit",disabled:c.value||!w.value,class:"group relative flex w-full justify-center rounded-md border border-transparent bg-olive-green py-2 px-4 text-sm font-medium text-white hover:bg-opacity-85 focus:outline-none focus:ring-2 focus:ring-olive-green focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(b(),g("span",H,s[8]||(s[8]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):y("",!0),e("span",{class:i({"opacity-0":c.value})},"إنشاء الحساب",2)],8,$)]),e("div",L,[I(C,{to:"/login",class:"font-medium text-olive-green hover:underline"},{default:j(()=>s[9]||(s[9]=[A(" لديك حساب بالفعل؟ تسجيل الدخول ")])),_:1})])],32)])])}}}),J=E(O,[["__scopeId","data-v-fca2687d"]]);export{J as default};
