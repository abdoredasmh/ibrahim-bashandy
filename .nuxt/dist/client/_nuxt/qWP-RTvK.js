import{_ as S}from"./CEyFpblA.js";import{e as E,q as N,u as R,C as L,r as s,k as V,c as a,a as o,i as f,B as q,n as y,t as k,b as p,p as I,w as h,h as z,D,o as t,d as w,_ as M}from"./CaF1xe-H.js";const T={class:"flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8"},U={class:"w-full max-w-md space-y-8 bg-white p-8 md:p-10 rounded-lg shadow border border-cream-gray"},j={key:0,class:"py-6 text-center"},F={key:1,class:"text-center"},A={key:1,class:"mt-6"},G=["disabled"],H={key:0},J={key:1},K={class:"mt-8"},O=E({__name:"confirm",setup(P){const i=N(),C=R(),x=L(),n=s(""),u=s(!1),_=s(!0),c=s(!1),l=s(""),m=s(!1),r=s(""),d=s(!1);V(()=>{x.query.email&&(l.value=x.query.email.toString()),setTimeout(()=>{_.value=!1,i.value?i.value.email_confirmed_at?(n.value="تم تأكيد حسابك بنجاح! يمكنك الآن استخدام جميع ميزات الموقع.",u.value=!1,c.value=!1):(n.value="حسابك موجود ولكن لم يتم تأكيد بريدك الإلكتروني بعد. يرجى التحقق من بريدك الوارد (والـ Spam) والنقر على رابط التأكيد.",u.value=!0,c.value=!0,!l.value&&i.value.email&&(l.value=i.value.email)):(n.value="لإكمال عملية التسجيل أو التأكيد، يرجى التحقق من بريدك الإلكتروني والنقر على الرابط المُرسل. إذا لم تستلم الإيميل، يمكنك طلب إعادة إرساله.",u.value=!0,c.value=!0,l.value||(console.warn("Email not found in URL for resend functionality."),n.value+=`
(لم نتمكن من تحديد بريدك لإعادة الإرسال تلقائيًا.)`))},1500)});const B=async()=>{if(!l.value){r.value="لا يمكن تحديد البريد الإلكتروني لإعادة الإرسال.",d.value=!0;return}m.value=!0,r.value="",d.value=!1;const{error:v}=await C.auth.resend({type:"signup",email:l.value});m.value=!1,v?(console.error("Resend Error:",v),r.value=v.message||"فشل إرسال الإيميل. حاول مرة أخرى لاحقًا.",d.value=!0):(r.value="تم إعادة إرسال إيميل التأكيد بنجاح. يرجى التحقق من بريدك.",d.value=!1)};return(v,e)=>{const b=D("Icon"),g=S;return t(),a("div",T,[o("div",U,[e[4]||(e[4]=o("h1",{class:"text-2xl md:text-3xl font-semibold text-center text-brown-dark mb-4"}," تأكيد البريد الإلكتروني ",-1)),_.value?(t(),a("div",j,e[0]||(e[0]=[o("p",{class:"text-gray-600 mb-4"},"جارٍ التحقق من حالة الحساب...",-1),o("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-olive-green"},null,-1)]))):(t(),a("div",F,[n.value?(t(),a("div",{key:0,class:y([u.value?"text-red-600":"text-green-600","text-lg mb-6 p-3 bg-opacity-10 rounded"]),style:q({backgroundColor:u.value?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)"})},k(n.value),7)):f("",!0),c.value&&l.value?(t(),a("div",A,[e[1]||(e[1]=o("p",{class:"text-sm text-gray-600 mb-2"},"لم تستلم الإيميل أو انتهت صلاحية الرابط؟",-1)),o("button",{onClick:B,disabled:m.value,class:"text-sm bg-gray-200 text-brown-dark px-4 py-2 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-wait"},[m.value?(t(),a("span",H,"جارٍ الإرسال...")):(t(),a("span",J,"إعادة إرسال رابط التأكيد"))],8,G),r.value?(t(),a("p",{key:0,class:y(["mt-2 text-xs",d.value?"text-red-500":"text-green-500"])},k(r.value),3)):f("",!0)])):f("",!0),o("div",K,[p(g,{to:"/",class:"inline-block text-olive-green hover:underline font-medium"},{default:h(()=>[p(b,{name:"mdi:arrow-right",class:"inline-block ml-1"}),e[2]||(e[2]=w(" العودة إلى الصفحة الرئيسية "))]),_:1}),z(i)?(t(),I(g,{key:0,to:"/profile",class:"inline-block text-olive-green hover:underline font-medium mr-4"},{default:h(()=>[e[3]||(e[3]=w(" الذهاب للملف الشخصي ")),p(b,{name:"mdi:account-circle-outline",class:"inline-block ml-1"})]),_:1})):f("",!0)])]))])])}}}),X=M(O,[["__scopeId","data-v-8074f604"]]);export{X as default};
