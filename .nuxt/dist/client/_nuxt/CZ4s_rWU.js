import{_ as ve}from"./CEyFpblA.js";import{e as le,u as re,N as ae,r as v,g as G,l as ne,p as te,w as C,h as B,o as i,b as h,a as e,d as $,t as c,v as pe,c as u,i as g,x as N,y as H,a6 as me,F as Y,j as W,_ as ie,C as fe,k as ge,n as se}from"./CaF1xe-H.js";import{L as ue}from"./CpjGp_h0.js";import{h as oe,G as xe,V as ye,Y as _e,S as he}from"./vWwLff75.js";import{_ as be}from"./Dfgt84Z7.js";const we={class:"fixed inset-0 overflow-y-auto"},ke={class:"flex min-h-full items-center justify-center p-4 text-center"},qe={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Ce={key:0,class:"space-y-4 pt-4 border-t dark:border-gray-700"},$e={class:"text-md font-medium text-gray-800 dark:text-gray-200"},ze={key:0,class:"space-y-3"},Me=["id","value","checked","onChange"],Qe=["id","onUpdate:modelValue","placeholder"],Ve=["onClick","disabled"],Ie={key:1,class:"flex items-center space-x-6 rtl:space-x-reverse"},De={class:"flex items-center gap-4"},Ee={class:"flex items-center gap-1 cursor-pointer"},Te=["checked"],Ae={class:"flex items-center gap-1 cursor-pointer"},Be=["checked"],Ze={key:1},Se={key:2,class:"mt-4 text-sm text-red-600 dark:text-red-400"},Fe={class:"mt-6 flex justify-start gap-3 border-t dark:border-gray-700 pt-5"},Le=["disabled"],Ne=["disabled"],Oe=le({__name:"AddEditQuestionModal",props:{modelValue:{type:Boolean,default:!1},quizId:{type:Number,required:!0},questionData:{type:Object,default:null}},emits:["update:modelValue","saved"],setup(J,{emit:Z}){const p=J,O=Z,z=re(),{$toast:M}=ae(),k=v(p.modelValue),f=v(!1),x=v(null),s=v({}),l=v([]),d=v(null),b=G(()=>{var n;return!!((n=p.questionData)!=null&&n.id)});let Q=Date.now();const D=()=>{if(x.value=null,f.value=!1,l.value=[],d.value=null,Q=Date.now(),b.value&&p.questionData){if(s.value={...p.questionData},s.value.type==="mcq"&&p.questionData.question_options)l.value=p.questionData.question_options.map((n,t)=>({tempId:Q+t,id:n.id,option_text:n.option_text,is_correct:n.is_correct})),Q+=p.questionData.question_options.length;else if(s.value.type==="true_false"&&p.questionData.question_options){const n=p.questionData.question_options.find(t=>t.is_correct);d.value=(n==null?void 0:n.option_text.toLowerCase())==="true"}}else s.value={question_text:"",type:"mcq",points:1,question_order:null,quiz_id:p.quizId},y(),y();F()};ne(()=>p.modelValue,n=>{k.value=n,n&&D()});const y=()=>{s.value.type==="mcq"&&l.value.push({tempId:Q++,option_text:"",is_correct:!1})},j=n=>{if(s.value.type!=="mcq"||l.value.length<=2)return;const t=l.value.findIndex(r=>r.tempId===n);if(t!==-1){const r=l.value[t].is_correct;l.value.splice(t,1),r&&l.value.length>0&&!l.value.some(V=>V.is_correct)&&(l.value[0].is_correct=!0)}},E=n=>{s.value.type==="mcq"&&(l.value=l.value.map(t=>({...t,is_correct:t.tempId===n})))},S=n=>{d.value=n},F=()=>{s.value.type==="mcq"?(l.value.length<2&&(l.value=[],y(),y()),l.value.length>0&&!l.value.some(n=>n.is_correct)&&(l.value[0].is_correct=!0),d.value=null):s.value.type==="true_false"?(l.value=[],d.value===null&&(d.value=!0)):(l.value=[],d.value=null)},T=G(()=>{var n;return!(!((n=s.value.question_text)!=null&&n.trim())||!s.value.type||s.value.points===null||s.value.points===void 0||s.value.points<0||s.value.type==="mcq"&&(l.value.length<2||!l.value.some(t=>t.is_correct)||l.value.some(t=>!t.option_text.trim()))||s.value.type==="true_false"&&d.value===null)}),U=async()=>{if(!T.value||f.value)return;f.value=!0,x.value=null;const n={quiz_id:p.quizId,question_text:s.value.question_text,type:s.value.type,question_order:s.value.question_order||null,points:s.value.points??1};let t=[];s.value.type==="mcq"?t=l.value.map(r=>({option_text:r.option_text,is_correct:r.is_correct,option_order:null})):s.value.type==="true_false"&&(t=[{option_text:"True",is_correct:d.value===!0,option_order:1},{option_text:"False",is_correct:d.value===!1,option_order:2}]);try{let r=null;if(b.value&&s.value.id){const{error:_}=await z.from("quiz_questions").update({...n,updated_at:new Date().toISOString()}).eq("id",s.value.id);if(_)throw _;r=s.value.id;const{error:w}=await z.from("question_options").delete().eq("question_id",s.value.id);if(w)throw w}else{const{data:_,error:w}=await z.from("quiz_questions").insert(n).select("id").single();if(w)throw w;if(!(_!=null&&_.id))throw new Error("Failed to get inserted question ID.");r=_.id}if(t.length>0&&r){const _=t.map(P=>({...P,question_id:r})),{error:w}=await z.from("question_options").insert(_);if(w)throw w}const{data:V,error:I}=await z.from("quiz_questions").select("*, question_options (*)").eq("id",r).single();if(I)throw I;if(!V)throw new Error("Failed to fetch final saved question data.");O("saved",V),L()}catch(r){console.error("Error saving question:",r),x.value=`فشل حفظ السؤال: (${r.message||"خطأ غير معروف"})`}finally{f.value=!1}};function L(){f.value||(k.value=!1,O("update:modelValue",!1))}return(n,t)=>(i(),te(B(he),{appear:"",show:k.value,as:"template"},{default:C(()=>[h(B(_e),{as:"div",onClose:L,class:"relative z-50"},{default:C(()=>[h(B(oe),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:C(()=>t[6]||(t[6]=[e("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true"},null,-1)])),_:1}),e("div",we,[e("div",ke,[h(B(oe),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:C(()=>[h(B(xe),{class:"w-full max-w-3xl transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 p-6 text-right shadow-xl transition-all"},{default:C(()=>[h(B(ye),{as:"h3",class:"text-lg font-semibold leading-6 text-gray-900 dark:text-gray-100 mb-4 border-b dark:border-gray-700 pb-3"},{default:C(()=>[$(c(b.value?"تعديل السؤال":"إضافة سؤال جديد")+" للاختبار ",1)]),_:1}),e("form",{onSubmit:pe(U,["prevent"]),class:"space-y-6"},[e("div",null,[t[7]||(t[7]=e("label",{for:"question-text",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"نص السؤال *",-1)),N(e("textarea",{id:"question-text","onUpdate:modelValue":t[0]||(t[0]=r=>s.value.question_text=r),required:"",rows:"4",class:"mt-1 block w-full input-field"},null,512),[[H,s.value.question_text]])]),e("div",qe,[e("div",null,[t[9]||(t[9]=e("label",{for:"question-type",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"نوع السؤال *",-1)),N(e("select",{id:"question-type","onUpdate:modelValue":t[1]||(t[1]=r=>s.value.type=r),required:"",onChange:F,class:"mt-1 block w-full input-field"},t[8]||(t[8]=[e("option",{value:"mcq"},"اختيار من متعدد (MCQ)",-1),e("option",{value:"true_false"},"صح / خطأ (T/F)",-1),e("option",{value:"written"},"كتابي (Written)",-1)]),544),[[me,s.value.type]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"question-points",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"النقاط *",-1)),N(e("input",{type:"number",id:"question-points","onUpdate:modelValue":t[2]||(t[2]=r=>s.value.points=r),required:"",min:"0",class:"mt-1 block w-full input-field"},null,512),[[H,s.value.points,void 0,{number:!0}]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"question-order",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"ترتيب السؤال",-1)),N(e("input",{type:"number",id:"question-order","onUpdate:modelValue":t[3]||(t[3]=r=>s.value.question_order=r),min:"1",placeholder:"اختياري",class:"mt-1 block w-full input-field"},null,512),[[H,s.value.question_order,void 0,{number:!0}]])])]),s.value.type==="mcq"||s.value.type==="true_false"?(i(),u("div",Ce,[e("h4",$e,[$(c(s.value.type==="mcq"?"خيارات الإجابة (MCQ)":"تحديد الإجابة الصحيحة (صح/خطأ)")+" ",1),t[12]||(t[12]=e("span",{class:"text-red-600"},"*",-1))]),s.value.type==="mcq"?(i(),u("div",ze,[(i(!0),u(Y,null,W(l.value,(r,V)=>(i(),u("div",{key:r.tempId,class:"flex items-center gap-2 p-2 border dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50"},[e("input",{id:"mcq-correct-"+r.tempId,type:"radio",name:"correct_mcq_option",value:r.tempId,checked:r.is_correct,onChange:I=>E(r.tempId),class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 flex-shrink-0",title:"تحديد كإجابة صحيحة"},null,40,Me),N(e("input",{id:"mcq-option-"+r.tempId,type:"text","onUpdate:modelValue":I=>r.option_text=I,required:"",placeholder:`نص الخيار ${V+1}`,class:"flex-grow input-field input-sm"},null,8,Qe),[[H,r.option_text]]),e("button",{type:"button",onClick:I=>j(r.tempId),disabled:l.value.length<=2,class:"p-1 text-red-500 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed dark:hover:text-red-400 flex-shrink-0",title:"حذف الخيار"},t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4"},[e("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.5-.75v.75h1V2.5h-1Z","clip-rule":"evenodd"})],-1)]),8,Ve)]))),128)),e("button",{type:"button",onClick:y,class:"text-sm text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 flex items-center gap-1"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4"},[e("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z","clip-rule":"evenodd"})],-1),e("span",null,"إضافة خيار آخر",-1)]))])):g("",!0),s.value.type==="true_false"?(i(),u("div",Ie,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"الإجابة الصحيحة هي:",-1)),e("div",De,[e("label",Ee,[e("input",{type:"radio",name:"tf_correct",value:!0,checked:d.value===!0,onChange:t[4]||(t[4]=r=>S(!0)),class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500"},null,40,Te),t[15]||(t[15]=e("span",{class:"text-sm text-green-700 dark:text-green-300 font-medium"},"صحيح",-1))]),e("label",Ae,[e("input",{type:"radio",name:"tf_correct",value:!1,checked:d.value===!1,onChange:t[5]||(t[5]=r=>S(!1)),class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500"},null,40,Be),t[16]||(t[16]=e("span",{class:"text-sm text-red-700 dark:text-red-300 font-medium"},"خطأ",-1))])])])):g("",!0)])):g("",!0),s.value.type==="written"?(i(),u("div",Ze,t[18]||(t[18]=[e("p",{class:"text-sm text-gray-600 dark:text-gray-400 italic"},"سيتم تصحيح إجابات الأسئلة الكتابية يدويًا.",-1)]))):g("",!0),x.value?(i(),u("p",Se,c(x.value),1)):g("",!0),e("div",Fe,[e("button",{type:"submit",disabled:f.value||!T.value,class:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-6 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50"},[f.value?(i(),te(ue,{key:0,class:"w-5 h-5 text-white -ml-1 mr-2"})):g("",!0),$(" "+c(f.value?"جاري الحفظ...":b.value?"حفظ التعديلات":"إضافة السؤال"),1)],8,Le),e("button",{type:"button",class:"inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",onClick:L,disabled:f.value}," إلغاء ",8,Ne)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),je=ie(Oe,[["__scopeId","data-v-a8a85b8d"]]),Ue={class:"container mx-auto px-4 py-6"},He={key:0,class:"text-center py-10"},Ge={key:1,class:"my-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Pe={class:"list-disc list-inside mt-1 text-sm"},Re={key:0},Ye={key:1},We={key:2,class:"my-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded text-center"},Je={key:3},Ke={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 pb-4 border-b dark:border-gray-700"},Xe={class:"text-2xl font-semibold text-gray-700 dark:text-gray-200"},et={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},tt={key:0},st={key:1},ot={key:2},lt={key:1,class:"space-y-4"},rt={class:"flex-1 min-w-0"},at={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},nt={class:"text-sm font-medium text-gray-900 dark:text-gray-100 break-words mb-2"},it={key:0,class:"mt-2 space-y-1 text-xs pl-4 rtl:pr-4 border-t dark:border-gray-700 pt-2"},ut={class:"flex-shrink-0 w-3 h-3"},dt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor"},ct={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor"},vt={class:"flex-shrink-0 flex flex-col sm:flex-row gap-2 items-end sm:items-center mt-2 sm:mt-0"},pt=["onClick"],mt=["onClick"],ft={key:2,class:"text-center py-10 text-gray-500 dark:text-gray-400"},gt=le({__name:"questions",setup(J){const Z=re(),{$toast:p}=ae(),O=fe(),z=G(()=>O.params.quizId),M=G(()=>{const a=parseInt(z.value,10);return isNaN(a)?null:a}),k=v(!0),f=v(!0),x=v(null),s=v(null),l=v(null),d=v([]),b=v(!1),Q=v(null),D=v(!1),y=v(null),j=v(null),E=v(null),S=v("success"),F=async()=>{if(k.value=!0,x.value=null,l.value=null,M.value===null){x.value={message:"معرف الاختبار في الرابط غير صالح."},k.value=!1;return}try{const{data:a,error:o}=await Z.from("quizzes").select("*, lessons (title), study_courses (title)").eq("id",M.value).single();if(o)throw o;if(!a)throw new Error("لم يتم العثور على الاختبار.");l.value=a}catch(a){console.error("Error fetching quiz details:",a),x.value=a??{message:"خطأ غير معروف."}}finally{k.value=!1}},T=async()=>{if(f.value=!0,s.value=null,d.value=[],M.value===null){s.value={message:"معرف الاختبار غير صالح لتحميل الأسئلة."},f.value=!1;return}try{const{data:a,error:o}=await Z.from("quiz_questions").select("*, question_options (*)").eq("quiz_id",M.value).order("question_order",{ascending:!0,nulls:"last"}).order("created_at",{ascending:!0});if(o)throw o;d.value=a||[]}catch(a){console.error("Error fetching questions:",a),s.value=a}finally{f.value=!1}},U=()=>{Q.value=null,b.value=!0},L=a=>{Q.value={...a,question_options:[...a.question_options??[]]},b.value=!0},n=a=>{_("تم حفظ السؤال بنجاح!","success"),b.value=!1,P()},t=a=>{y.value=a,j.value={title:"تأكيد حذف السؤال",message:`هل أنت متأكد من حذف السؤال: "${a.question_text.substring(0,50)}..."؟ سيتم حذف خياراته أيضًا.`,confirmText:"نعم، حذف السؤال",confirmClass:"bg-red-600 hover:bg-red-700 focus:ring-red-500",cancelText:"إلغاء"},D.value=!0},r=async()=>{if(!y.value)return;const a=y.value.id,o=y.value.question_text.substring(0,30);try{const{error:q}=await Z.from("quiz_questions").delete().eq("id",a);if(q)throw q;d.value=d.value.filter(R=>R.id!==a),_(`تم حذف السؤال "${o}..." بنجاح.`,"success")}catch(q){console.error("Error deleting question:",q),w(`فشل حذف السؤال: ${q.message}`,"error")}finally{y.value=null,D.value=!1}},V=a=>{switch(a){case"lesson":return"اختبار درس";case"module":return"اختبار وحدة";case"final":return"اختبار نهائي";case"practice":return"اختبار تدريبي";default:return"غير محدد"}},I=a=>{switch(a){case"mcq":return"اختيار من متعدد";case"true_false":return"صح / خطأ";case"written":return"كتابي";default:return"غير محدد"}},_=(a,o="info")=>{p!=null&&p[o]?p[o](a):console.log(`[${o.toUpperCase()}] ${a}`)},w=(a,o)=>{E.value=a,S.value=o,setTimeout(()=>{E.value=null},5e3)},P=()=>{T()};return ge(()=>{M.value!==null?(F(),T()):(x.value={message:"معرف الاختبار في الرابط غير صالح."},k.value=!1,f.value=!1)}),ne(M,a=>{a!==null&&(F(),T())}),(a,o)=>{var K,X,ee;const q=ve,R=je,de=be;return i(),u("div",Ue,[k.value||f.value?(i(),u("div",He,[h(ue),o[3]||(o[3]=e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"جارٍ تحميل بيانات الاختبار والأسئلة...",-1))])):x.value||s.value?(i(),u("div",Ge,[o[5]||(o[5]=e("strong",{class:"font-bold"},"خطأ!",-1)),o[6]||(o[6]=e("p",null,"حدث خطأ أثناء تحميل البيانات:",-1)),e("ul",Pe,[x.value?(i(),u("li",Re,"فشل تحميل بيانات الاختبار: "+c(x.value.message),1)):g("",!0),s.value?(i(),u("li",Ye,"فشل تحميل الأسئلة: "+c(s.value.message),1)):g("",!0)]),h(q,{to:"/admin/quizzes",class:"mt-3 inline-block text-indigo-600 hover:underline"},{default:C(()=>o[4]||(o[4]=[$("العودة لقائمة الاختبارات")])),_:1})])):l.value?(i(),u("div",Je,[e("div",Ke,[e("div",null,[h(q,{to:"/admin/quizzes",class:"text-sm text-gray-500 dark:text-gray-400 hover:underline flex items-center gap-1 mb-1"},{default:C(()=>o[8]||(o[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4"},[e("path",{"fill-rule":"evenodd",d:"M14 8a.75.75 0 0 1-.75.75H4.56l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 1.06L4.56 7.25H13.25A.75.75 0 0 1 14 8Z","clip-rule":"evenodd"})],-1),e("span",null,"الاختبارات",-1)])),_:1}),e("h1",Xe,"إدارة أسئلة الاختبار: "+c(l.value.title),1),e("p",et,[$(c(V(l.value.type))+" ",1),l.value.type==="lesson"?(i(),u("span",tt," للدرس: "+c((K=l.value.lessons)==null?void 0:K.title),1)):g("",!0),l.value.type==="module"?(i(),u("span",st," للوحدة "+c(l.value.module_number)+" في دورة: "+c((X=l.value.study_courses)==null?void 0:X.title),1)):g("",!0),l.value.type==="final"?(i(),u("span",ot," لدورة: "+c((ee=l.value.study_courses)==null?void 0:ee.title),1)):g("",!0)])]),e("button",{onClick:U,class:"flex-shrink-0 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"},o[9]||(o[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 -ml-1 mr-2 rtl:ml-2 rtl:-mr-1"},[e("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z","clip-rule":"evenodd"})],-1),$(" إضافة سؤال جديد ")]))]),E.value?(i(),u("div",{key:0,class:se(["mb-4 p-3 border rounded text-sm",S.value==="success"?"bg-green-100 border-green-300 text-green-700":"bg-red-100 border-red-300 text-red-700"])},c(E.value),3)):g("",!0),d.value&&d.value.length>0?(i(),u("div",lt,[(i(!0),u(Y,null,W(d.value,(m,ce)=>(i(),u("div",{key:m.id,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-4 border dark:border-gray-700 flex flex-col sm:flex-row justify-between items-start gap-4"},[e("div",rt,[e("p",at," السؤال "+c(ce+1)+" ("+c(I(m.type))+" - "+c(m.points)+" "+c(m.points===1?"نقطة":"نقاط")+") ",1),e("p",nt,c(m.question_text),1),(m.type==="mcq"||m.type==="true_false")&&m.question_options&&m.question_options.length>0?(i(),u("div",it,[o[12]||(o[12]=e("h5",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1"},"الخيارات:",-1)),(i(!0),u(Y,null,W(m.question_options,A=>(i(),u("div",{key:A.id,class:se(["flex items-center gap-2",A.is_correct?"text-green-700 dark:text-green-300 font-medium":"text-gray-600 dark:text-gray-400"])},[e("span",ut,[A.is_correct?(i(),u("svg",dt,o[10]||(o[10]=[e("path",{"fill-rule":"evenodd",d:"M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.35 2.35 4.492-6.738a.75.75 0 0 1 1.04-.208Z","clip-rule":"evenodd"},null,-1)]))):(i(),u("svg",ct,o[11]||(o[11]=[e("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14Zm2.78-4.22a.75.75 0 0 0-1.06-1.06L8 11.44l-1.72-1.72a.75.75 0 0 0-1.06 1.06L6.94 12.5l-1.72 1.72a.75.75 0 1 0 1.06 1.06L8 13.56l1.72 1.72a.75.75 0 1 0 1.06-1.06L9.06 12.5l1.72-1.72Z"},null,-1)])))]),e("span",null,c(A.option_text),1)],2))),128))])):g("",!0)]),e("div",vt,[e("button",{onClick:A=>L(m),class:"text-xs text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30 flex items-center gap-1"},o[13]||(o[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-3 h-3"},[e("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774v2.475h2.475l4.263-4.262a1.75 1.75 0 0 0 0-2.474Z"}),e("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9.81a.75.75 0 0 0-1.5 0v1.44c0 .138-.112.25-.25.25h-6.5a.25.25 0 0 1-.25-.25v-6.5c0-.138.112-.25.25-.25h1.44a.75.75 0 0 0 0-1.5H4.75Z"})],-1),e("span",null,"تعديل",-1)]),8,pt),e("button",{onClick:A=>t(m),class:"text-xs text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-1"},o[14]||(o[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-3 h-3"},[e("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.5-.75v.75h1V2.5h-1Z","clip-rule":"evenodd"})],-1),e("span",null,"حذف",-1)]),8,mt)])]))),128))])):f.value?g("",!0):(i(),u("div",ft,[o[15]||(o[15]=$(" لم يتم إضافة أي أسئلة لهذا الاختبار بعد. ")),e("button",{onClick:U,class:"ml-2 text-indigo-600 hover:underline"},"إضافة أول سؤال")])),h(R,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=m=>b.value=m),"quiz-id":M.value,"question-data":Q.value,onSaved:n},null,8,["modelValue","quiz-id","question-data"]),h(de,{modelValue:D.value,"onUpdate:modelValue":o[1]||(o[1]=m=>D.value=m),config:j.value,onConfirm:r,onClose:o[2]||(o[2]=m=>y.value=null)},null,8,["modelValue","config"])])):(i(),u("div",We,[$(" لم يتم العثور على الاختبار المطلوب (ID: "+c(z.value)+"). ",1),h(q,{to:"/admin/quizzes",class:"mt-3 block text-indigo-600 hover:underline"},{default:C(()=>o[7]||(o[7]=[$("العودة لقائمة الاختبارات")])),_:1})]))])}}}),wt=ie(gt,[["__scopeId","data-v-4af25bc6"]]);export{wt as default};
