var tr=Object.defineProperty;var nr=(d,e,t)=>e in d?tr(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var N=(d,e,t)=>nr(d,typeof e!="symbol"?e+"":e,t);import{_ as rr}from"./CEyFpblA.js";import{e as Ln,c as B,a as _,n as Te,t as M,Q as sr,o as P,d as ue,_ as In,u as ir,C as ar,g as J,a2 as Ue,A as hn,r as It,f as or,l as lr,b as ee,w as ye,h as Ce,i as te,p as ct,F as cr,j as ur,v as pr,V as ut,x as dr,y as hr,z as fr}from"./CaF1xe-H.js";import{L as fn}from"./CpjGp_h0.js";import{u as gr}from"./CqvecxAQ.js";import{u as mr}from"./C0vmt3Ib.js";const br={class:"info-item flex justify-between items-baseline gap-x-2"},kr=Ln({__name:"InfoItem",props:{label:{},value:{},labelClass:{},valueClass:{}},setup(d){return(e,t)=>(P(),B("div",br,[_("dt",{class:Te(["text-gray-500 dark:text-gray-400 flex-shrink-0",e.labelClass])},M(e.label)+M(e.label?":":""),3),_("dd",{class:Te(["text-gray-900 dark:text-gray-100 text-left",e.valueClass])},[sr(e.$slots,"default",{},()=>[ue(M(e.value??"N/A"),1)],!0)],2)]))}}),ne=In(kr,[["__scopeId","data-v-4b548670"]]);function Bt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ee=Bt();function Cn(d){Ee=d}const Qe={exec:()=>null};function I(d,e=""){let t=typeof d=="string"?d:d.source;const n={replace:(a,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(q.caret,"$1"),t=t.replace(a,s),n},getRegex:()=>new RegExp(t,e)};return n}const q={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:d=>new RegExp(`^( {0,3}${d})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:d=>new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:d=>new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:d=>new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:d=>new RegExp(`^ {0,${Math.min(3,d-1)}}#`),htmlBeginRegex:d=>new RegExp(`^ {0,${Math.min(3,d-1)}}<(?:[a-z].*>|!--)`,"i")},xr=/^(?:[ \t]*(?:\n|$))+/,_r=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,yr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ve=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,wr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ut=/(?:[*+-]|\d{1,9}[.)])/,On=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Nn=I(On).replace(/bull/g,Ut).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Tr=I(On).replace(/bull/g,Ut).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ft=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Sr=/^[^\n]+/,Ht=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Er=I(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ht).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ar=I(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ut).getRegex(),kt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Gt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,vr=I("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Gt).replace("tag",kt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mn=I(Ft).replace("hr",Ve).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt).getRegex(),Rr=I(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Mn).getRegex(),Wt={blockquote:Rr,code:_r,def:Er,fences:yr,heading:wr,hr:Ve,html:vr,lheading:Nn,list:Ar,newline:xr,paragraph:Mn,table:Qe,text:Sr},gn=I("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ve).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt).getRegex(),Lr={...Wt,lheading:Tr,table:gn,paragraph:I(Ft).replace("hr",Ve).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt).getRegex()},Ir={...Wt,html:I(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Gt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:I(Ft).replace("hr",Ve).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Nn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Cr=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Or=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Dn=/^( {2,}|\\)\n(?!\s*$)/,Nr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,xt=/[\p{P}\p{S}]/u,jt=/[\s\p{P}\p{S}]/u,Pn=/[^\s\p{P}\p{S}]/u,Mr=I(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,jt).getRegex(),$n=/(?!~)[\p{P}\p{S}]/u,Dr=/(?!~)[\s\p{P}\p{S}]/u,Pr=/(?:[^\s\p{P}\p{S}]|~)/u,$r=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,zn=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,zr=I(zn,"u").replace(/punct/g,xt).getRegex(),Br=I(zn,"u").replace(/punct/g,$n).getRegex(),Bn="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ur=I(Bn,"gu").replace(/notPunctSpace/g,Pn).replace(/punctSpace/g,jt).replace(/punct/g,xt).getRegex(),Fr=I(Bn,"gu").replace(/notPunctSpace/g,Pr).replace(/punctSpace/g,Dr).replace(/punct/g,$n).getRegex(),Hr=I("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Pn).replace(/punctSpace/g,jt).replace(/punct/g,xt).getRegex(),Gr=I(/\\(punct)/,"gu").replace(/punct/g,xt).getRegex(),Wr=I(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jr=I(Gt).replace("(?:-->|$)","-->").getRegex(),Zr=I("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,qr=I(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",gt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Un=I(/^!?\[(label)\]\[(ref)\]/).replace("label",gt).replace("ref",Ht).getRegex(),Fn=I(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ht).getRegex(),Qr=I("reflink|nolink(?!\\()","g").replace("reflink",Un).replace("nolink",Fn).getRegex(),Zt={_backpedal:Qe,anyPunctuation:Gr,autolink:Wr,blockSkip:$r,br:Dn,code:Or,del:Qe,emStrongLDelim:zr,emStrongRDelimAst:Ur,emStrongRDelimUnd:Hr,escape:Cr,link:qr,nolink:Fn,punctuation:Mr,reflink:Un,reflinkSearch:Qr,tag:Zr,text:Nr,url:Qe},Yr={...Zt,link:I(/^!?\[(label)\]\((.*?)\)/).replace("label",gt).getRegex(),reflink:I(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gt).getRegex()},Pt={...Zt,emStrongRDelimAst:Fr,emStrongLDelim:Br,url:I(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Vr={...Pt,br:I(Dn).replace("{2,}","*").getRegex(),text:I(Pt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},pt={normal:Wt,gfm:Lr,pedantic:Ir},Fe={normal:Zt,gfm:Pt,breaks:Vr,pedantic:Yr},Xr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mn=d=>Xr[d];function pe(d,e){if(e){if(q.escapeTest.test(d))return d.replace(q.escapeReplace,mn)}else if(q.escapeTestNoEncode.test(d))return d.replace(q.escapeReplaceNoEncode,mn);return d}function bn(d){try{d=encodeURI(d).replace(q.percentDecode,"%")}catch{return null}return d}function kn(d,e){var i;const t=d.replace(q.findPipe,(s,o,p)=>{let l=!1,c=o;for(;--c>=0&&p[c]==="\\";)l=!l;return l?"|":" |"}),n=t.split(q.splitPipe);let a=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(q.slashPipe,"|");return n}function He(d,e,t){const n=d.length;if(n===0)return"";let a=0;for(;a<n&&d.charAt(n-a-1)===e;)a++;return d.slice(0,n-a)}function Kr(d,e){if(d.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<d.length;n++)if(d[n]==="\\")n++;else if(d[n]===e[0])t++;else if(d[n]===e[1]&&(t--,t<0))return n;return-1}function xn(d,e,t,n,a){const i=e.href,s=e.title||null,o=d[1].replace(a.other.outputLinkReplace,"$1");if(d[0].charAt(0)!=="!"){n.state.inLink=!0;const p={type:"link",raw:t,href:i,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,p}return{type:"image",raw:t,href:i,title:s,text:o}}function Jr(d,e,t){const n=d.match(t.other.indentCodeCompensation);if(n===null)return e;const a=n[1];return e.split(`
`).map(i=>{const s=i.match(t.other.beginningSpace);if(s===null)return i;const[o]=s;return o.length>=a.length?i.slice(a.length):i}).join(`
`)}class mt{constructor(e){N(this,"options");N(this,"rules");N(this,"lexer");this.options=e||Ee}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:He(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],a=Jr(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:a}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const a=He(n,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(n=a.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:He(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=He(t[0],`
`).split(`
`),a="",i="";const s=[];for(;n.length>0;){let o=!1;const p=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))p.push(n[l]),o=!0;else if(!o)p.push(n[l]);else break;n=n.slice(l);const c=p.join(`
`),b=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${c}`:c,i=i?`${i}
${b}`:b;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(b,s,!0),this.lexer.state.top=g,n.length===0)break;const x=s.at(-1);if((x==null?void 0:x.type)==="code")break;if((x==null?void 0:x.type)==="blockquote"){const A=x,S=A.raw+`
`+n.join(`
`),G=this.blockquote(S);s[s.length-1]=G,a=a.substring(0,a.length-A.raw.length)+G.raw,i=i.substring(0,i.length-A.text.length)+G.text;break}else if((x==null?void 0:x.type)==="list"){const A=x,S=A.raw+`
`+n.join(`
`),G=this.list(S);s[s.length-1]=G,a=a.substring(0,a.length-x.raw.length)+G.raw,i=i.substring(0,i.length-A.raw.length)+G.raw,n=S.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const a=n.length>1,i={type:"list",raw:"",ordered:a,start:a?+n.slice(0,-1):"",loose:!1,items:[]};n=a?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=a?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let l=!1,c="",b="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let g=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,K=>" ".repeat(3*K.length)),x=e.split(`
`,1)[0],A=!g.trim(),S=0;if(this.options.pedantic?(S=2,b=g.trimStart()):A?S=t[1].length+1:(S=t[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,b=g.slice(S),S+=t[1].length),A&&this.rules.other.blankLine.test(x)&&(c+=x+`
`,e=e.substring(x.length+1),l=!0),!l){const K=this.rules.other.nextBulletRegex(S),U=this.rules.other.hrRegex(S),C=this.rules.other.fencesBeginRegex(S),X=this.rules.other.headingBeginRegex(S),me=this.rules.other.htmlBeginRegex(S);for(;e;){const be=e.split(`
`,1)[0];let oe;if(x=be,this.options.pedantic?(x=x.replace(this.rules.other.listReplaceNesting,"  "),oe=x):oe=x.replace(this.rules.other.tabCharGlobal,"    "),C.test(x)||X.test(x)||me.test(x)||K.test(x)||U.test(x))break;if(oe.search(this.rules.other.nonSpaceChar)>=S||!x.trim())b+=`
`+oe.slice(S);else{if(A||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(g)||X.test(g)||U.test(g))break;b+=`
`+x}!A&&!x.trim()&&(A=!0),c+=be+`
`,e=e.substring(be.length+1),g=oe.slice(S)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let G=null,ge;this.options.gfm&&(G=this.rules.other.listIsTask.exec(b),G&&(ge=G[0]!=="[ ] ",b=b.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!G,checked:ge,loose:!1,text:b,tokens:[]}),i.raw+=c}const p=i.items.at(-1);if(p)p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(g=>g.type==="space"),b=c.length>0&&c.some(g=>this.rules.other.anyLine.test(g.raw));i.loose=b}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:a,title:i}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=kn(t[1]),a=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===a.length){for(const p of a)this.rules.other.tableAlignRight.test(p)?s.align.push("right"):this.rules.other.tableAlignCenter.test(p)?s.align.push("center"):this.rules.other.tableAlignLeft.test(p)?s.align.push("left"):s.align.push(null);for(let p=0;p<n.length;p++)s.header.push({text:n[p],tokens:this.lexer.inline(n[p]),header:!0,align:s.align[p]});for(const p of i)s.rows.push(kn(p,s.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[c]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=He(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=Kr(t[2],"()");if(s>-1){const p=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,p).trim(),t[3]=""}}let a=t[2],i="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(a);s&&(a=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?a=a.slice(1):a=a.slice(1,-1)),xn(t,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const a=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[a.toLowerCase()];if(!i){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return xn(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let a=this.rules.inline.emStrongLDelim.exec(e);if(!a||a[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(a[1]||a[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...a[0]].length-1;let o,p,l=s,c=0;const b=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(b.lastIndex=0,t=t.slice(-1*e.length+s);(a=b.exec(t))!=null;){if(o=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!o)continue;if(p=[...o].length,a[3]||a[4]){l+=p;continue}else if((a[5]||a[6])&&s%3&&!((s+p)%3)){c+=p;continue}if(l-=p,l>0)continue;p=Math.min(p,p+l+c);const g=[...a[0]][0].length,x=e.slice(0,s+a.index+g+p);if(Math.min(s,p)%2){const S=x.slice(1,-1);return{type:"em",raw:x,text:S,tokens:this.lexer.inlineTokens(S)}}const A=x.slice(2,-2);return{type:"strong",raw:x,text:A,tokens:this.lexer.inlineTokens(A)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const a=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return a&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,a;return t[2]==="@"?(n=t[1],a="mailto:"+n):(n=t[1],a=n),{type:"link",raw:t[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let a,i;if(t[2]==="@")a=t[0],i="mailto:"+a;else{let s;do s=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(s!==t[0]);a=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:a,href:i,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}}class re{constructor(e){N(this,"tokens");N(this,"options");N(this,"state");N(this,"tokenizer");N(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ee,this.options.tokenizer=this.options.tokenizer||new mt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:q,block:pt.normal,inline:Fe.normal};this.options.pedantic?(t.block=pt.pedantic,t.inline=Fe.pedantic):this.options.gfm&&(t.block=pt.gfm,this.options.breaks?t.inline=Fe.breaks:t.inline=Fe.gfm),this.tokenizer.rules=t}static get rules(){return{block:pt,inline:Fe}}static lex(e,t){return new re(t).lex(e)}static lexInline(e,t){return new re(t).inlineTokens(e)}lex(e){e=e.replace(q.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var a,i,s;for(this.options.pedantic&&(e=e.replace(q.tabCharGlobal,"    ").replace(q.spaceLine,""));e;){let o;if((i=(a=this.options.extensions)==null?void 0:a.block)!=null&&i.some(l=>(o=l.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);const l=t.at(-1);o.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+o.raw,l.text+=`
`+o.text,this.inlineQueue.at(-1).src=l.text):t.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+o.raw,l.text+=`
`+o.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),t.push(o);continue}let p=e;if((s=this.options.extensions)!=null&&s.startBlock){let l=1/0;const c=e.slice(1);let b;this.options.extensions.startBlock.forEach(g=>{b=g.call({lexer:this},c),typeof b=="number"&&b>=0&&(l=Math.min(l,b))}),l<1/0&&l>=0&&(p=e.substring(0,l+1))}if(this.state.top&&(o=this.tokenizer.paragraph(p))){const l=t.at(-1);n&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(o),n=p.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(o);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,p,l;let n=e,a=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,s="";for(;e;){i||(s=""),i=!1;let c;if((p=(o=this.options.extensions)==null?void 0:o.inline)!=null&&p.some(g=>(c=g.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const g=t.at(-1);c.type==="text"&&(g==null?void 0:g.type)==="text"?(g.raw+=c.raw,g.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,n,s)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let b=e;if((l=this.options.extensions)!=null&&l.startInline){let g=1/0;const x=e.slice(1);let A;this.options.extensions.startInline.forEach(S=>{A=S.call({lexer:this},x),typeof A=="number"&&A>=0&&(g=Math.min(g,A))}),g<1/0&&g>=0&&(b=e.substring(0,g+1))}if(c=this.tokenizer.inlineText(b)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(s=c.raw.slice(-1)),i=!0;const g=t.at(-1);(g==null?void 0:g.type)==="text"?(g.raw+=c.raw,g.text+=c.text):t.push(c);continue}if(e){const g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return t}}class bt{constructor(e){N(this,"options");N(this,"parser");this.options=e||Ee}space(e){return""}code({text:e,lang:t,escaped:n}){var s;const a=(s=(t||"").match(q.notSpaceStart))==null?void 0:s[0],i=e.replace(q.endingNewline,"")+`
`;return a?'<pre><code class="language-'+pe(a)+'">'+(n?i:pe(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:pe(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let a="";for(let o=0;o<e.items.length;o++){const p=e.items[o];a+=this.listitem(p)}const i=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+a+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const a=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=a+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=a+" "+pe(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):t+=a+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let a="";for(let i=0;i<e.rows.length;i++){const s=e.rows[i];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);a+=this.tablerow({text:n})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+a+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${pe(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const a=this.parser.parseInline(n),i=bn(e);if(i===null)return a;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+pe(t)+'"'),s+=">"+a+"</a>",s}image({href:e,title:t,text:n}){const a=bn(e);if(a===null)return pe(n);e=a;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${pe(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:pe(e.text)}}class qt{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class se{constructor(e){N(this,"options");N(this,"renderer");N(this,"textRenderer");this.options=e||Ee,this.options.renderer=this.options.renderer||new bt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qt}static parse(e,t){return new se(t).parse(e)}static parseInline(e,t){return new se(t).parseInline(e)}parse(e,t=!0){var a,i;let n="";for(let s=0;s<e.length;s++){const o=e[s];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[o.type]){const l=o,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){n+=c||"";continue}}const p=o;switch(p.type){case"space":{n+=this.renderer.space(p);continue}case"hr":{n+=this.renderer.hr(p);continue}case"heading":{n+=this.renderer.heading(p);continue}case"code":{n+=this.renderer.code(p);continue}case"table":{n+=this.renderer.table(p);continue}case"blockquote":{n+=this.renderer.blockquote(p);continue}case"list":{n+=this.renderer.list(p);continue}case"html":{n+=this.renderer.html(p);continue}case"paragraph":{n+=this.renderer.paragraph(p);continue}case"text":{let l=p,c=this.renderer.text(l);for(;s+1<e.length&&e[s+1].type==="text";)l=e[++s],c+=`
`+this.renderer.text(l);t?n+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):n+=c;continue}default:{const l='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(e,t=this.renderer){var a,i;let n="";for(let s=0;s<e.length;s++){const o=e[s];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[o.type]){const l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=l||"";continue}}const p=o;switch(p.type){case"escape":{n+=t.text(p);break}case"html":{n+=t.html(p);break}case"link":{n+=t.link(p);break}case"image":{n+=t.image(p);break}case"strong":{n+=t.strong(p);break}case"em":{n+=t.em(p);break}case"codespan":{n+=t.codespan(p);break}case"br":{n+=t.br(p);break}case"del":{n+=t.del(p);break}case"text":{n+=t.text(p);break}default:{const l='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}}class Ye{constructor(e){N(this,"options");N(this,"block");this.options=e||Ee}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?re.lex:re.lexInline}provideParser(){return this.block?se.parse:se.parseInline}}N(Ye,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class es{constructor(...e){N(this,"defaults",Bt());N(this,"options",this.setOptions);N(this,"parse",this.parseMarkdown(!0));N(this,"parseInline",this.parseMarkdown(!1));N(this,"Parser",se);N(this,"Renderer",bt);N(this,"TextRenderer",qt);N(this,"Lexer",re);N(this,"Tokenizer",mt);N(this,"Hooks",Ye);this.use(...e)}walkTokens(e,t){var a,i;let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const o=s;for(const p of o.header)n=n.concat(this.walkTokens(p.tokens,t));for(const p of o.rows)for(const l of p)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const o=s;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=s;(i=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(p=>{const l=o[p].flat(1/0);n=n.concat(this.walkTokens(l,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const a={...n};if(a.async=this.defaults.async||a.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=t.renderers[i.name];s?t.renderers[i.name]=function(...o){let p=i.renderer.apply(this,o);return p===!1&&(p=s.apply(this,o)),p}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),a.extensions=t),n.renderer){const i=this.defaults.renderer||new bt(this.defaults);for(const s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const o=s,p=n.renderer[o],l=i[o];i[o]=(...c)=>{let b=p.apply(i,c);return b===!1&&(b=l.apply(i,c)),b||""}}a.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new mt(this.defaults);for(const s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const o=s,p=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let b=p.apply(i,c);return b===!1&&(b=l.apply(i,c)),b}}a.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new Ye;for(const s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const o=s,p=n.hooks[o],l=i[o];Ye.passThroughHooks.has(s)?i[o]=c=>{if(this.defaults.async)return Promise.resolve(p.call(i,c)).then(g=>l.call(i,g));const b=p.call(i,c);return l.call(i,b)}:i[o]=(...c)=>{let b=p.apply(i,c);return b===!1&&(b=l.apply(i,c)),b}}a.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,s=n.walkTokens;a.walkTokens=function(o){let p=[];return p.push(s.call(this,o)),i&&(p=p.concat(i.call(this,o))),p}}this.defaults={...this.defaults,...a}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return re.lex(e,t??this.defaults)}parser(e,t){return se.parse(e,t??this.defaults)}parseMarkdown(e){return(n,a)=>{const i={...a},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const p=s.hooks?s.hooks.provideLexer():e?re.lex:re.lexInline,l=s.hooks?s.hooks.provideParser():e?se.parse:se.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(c=>p(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let c=p(n,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let b=l(c,s);return s.hooks&&(b=s.hooks.postprocess(b)),b}catch(c){return o(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const a="<p>An error occurred:</p><pre>"+pe(n.message+"",!0)+"</pre>";return t?Promise.resolve(a):a}if(t)return Promise.reject(n);throw n}}}const Se=new es;function L(d,e){return Se.parse(d,e)}L.options=L.setOptions=function(d){return Se.setOptions(d),L.defaults=Se.defaults,Cn(L.defaults),L};L.getDefaults=Bt;L.defaults=Ee;L.use=function(...d){return Se.use(...d),L.defaults=Se.defaults,Cn(L.defaults),L};L.walkTokens=function(d,e){return Se.walkTokens(d,e)};L.parseInline=Se.parseInline;L.Parser=se;L.parser=se.parse;L.Renderer=bt;L.TextRenderer=qt;L.Lexer=re;L.lexer=re.lex;L.Tokenizer=mt;L.Hooks=Ye;L.parse=L;L.options;L.setOptions;L.use;L.walkTokens;L.parseInline;se.parse;re.lex;/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:Hn,setPrototypeOf:_n,isFrozen:ts,getPrototypeOf:ns,getOwnPropertyDescriptor:rs}=Object;let{freeze:Q,seal:ie,create:Gn}=Object,{apply:$t,construct:zt}=typeof Reflect<"u"&&Reflect;Q||(Q=function(e){return e});ie||(ie=function(e){return e});$t||($t=function(e,t,n){return e.apply(t,n)});zt||(zt=function(e,t){return new e(...t)});const dt=Y(Array.prototype.forEach),ss=Y(Array.prototype.lastIndexOf),yn=Y(Array.prototype.pop),Ge=Y(Array.prototype.push),is=Y(Array.prototype.splice),ft=Y(String.prototype.toLowerCase),Ct=Y(String.prototype.toString),wn=Y(String.prototype.match),We=Y(String.prototype.replace),as=Y(String.prototype.indexOf),os=Y(String.prototype.trim),ae=Y(Object.prototype.hasOwnProperty),Z=Y(RegExp.prototype.test),je=ls(TypeError);function Y(d){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return $t(d,e,n)}}function ls(d){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zt(d,t)}}function E(d,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ft;_n&&_n(d,null);let n=e.length;for(;n--;){let a=e[n];if(typeof a=="string"){const i=t(a);i!==a&&(ts(e)||(e[n]=i),a=i)}d[a]=!0}return d}function cs(d){for(let e=0;e<d.length;e++)ae(d,e)||(d[e]=null);return d}function we(d){const e=Gn(null);for(const[t,n]of Hn(d))ae(d,t)&&(Array.isArray(n)?e[t]=cs(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=we(n):e[t]=n);return e}function Ze(d,e){for(;d!==null;){const n=rs(d,e);if(n){if(n.get)return Y(n.get);if(typeof n.value=="function")return Y(n.value)}d=ns(d)}function t(){return null}return t}const Tn=Q(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ot=Q(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Nt=Q(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),us=Q(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Mt=Q(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ps=Q(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Sn=Q(["#text"]),En=Q(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Dt=Q(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),An=Q(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ht=Q(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ds=ie(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hs=ie(/<%[\w\W]*|[\w\W]*%>/gm),fs=ie(/\$\{[\w\W]*/gm),gs=ie(/^data-[\-\w.\u00B7-\uFFFF]+$/),ms=ie(/^aria-[\-\w]+$/),Wn=ie(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bs=ie(/^(?:\w+script|data):/i),ks=ie(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),jn=ie(/^html$/i),xs=ie(/^[a-z][.\w]*(-[.\w]+)+$/i);var vn=Object.freeze({__proto__:null,ARIA_ATTR:ms,ATTR_WHITESPACE:ks,CUSTOM_ELEMENT:xs,DATA_ATTR:gs,DOCTYPE_NAME:jn,ERB_EXPR:hs,IS_ALLOWED_URI:Wn,IS_SCRIPT_OR_DATA:bs,MUSTACHE_EXPR:ds,TMPLIT_EXPR:fs});const qe={element:1,text:3,progressingInstruction:7,comment:8,document:9},_s=function(){return typeof window>"u"?null:window},ys=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(n=t.getAttribute(a));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Rn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Zn(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_s();const e=k=>Zn(k);if(e.version="3.2.5",e.removed=[],!d||!d.document||d.document.nodeType!==qe.document||!d.Element)return e.isSupported=!1,e;let{document:t}=d;const n=t,a=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:o,Element:p,NodeFilter:l,NamedNodeMap:c=d.NamedNodeMap||d.MozNamedAttrMap,HTMLFormElement:b,DOMParser:g,trustedTypes:x}=d,A=p.prototype,S=Ze(A,"cloneNode"),G=Ze(A,"remove"),ge=Ze(A,"nextSibling"),K=Ze(A,"childNodes"),U=Ze(A,"parentNode");if(typeof s=="function"){const k=t.createElement("template");k.content&&k.content.ownerDocument&&(t=k.content.ownerDocument)}let C,X="";const{implementation:me,createNodeIterator:be,createDocumentFragment:oe,getElementsByTagName:Oe}=t,{importNode:Xe}=n;let $=Rn();e.isSupported=typeof Hn=="function"&&typeof U=="function"&&me&&me.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ke,ERB_EXPR:Ne,TMPLIT_EXPR:Me,DATA_ATTR:_t,ARIA_ATTR:yt,IS_SCRIPT_OR_DATA:Ke,ATTR_WHITESPACE:Je,CUSTOM_ELEMENT:De}=vn;let{IS_ALLOWED_URI:et}=vn,z=null;const f=E({},[...Tn,...Ot,...Nt,...Mt,...Sn]);let u=null;const w=E({},[...En,...Dt,...An,...ht]);let T=Object.seal(Gn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),R=null,y=null,O=!0,v=!0,xe=!1,tt=!0,fe=!1,Pe=!0,_e=!1,wt=!1,Tt=!1,Ae=!1,nt=!1,rt=!1,Qt=!0,Yt=!1;const qn="user-content-";let St=!0,$e=!1,ve={},Re=null;const Vt=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xt=null;const Kt=E({},["audio","video","img","source","image","track"]);let Et=null;const Jt=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),st="http://www.w3.org/1998/Math/MathML",it="http://www.w3.org/2000/svg",de="http://www.w3.org/1999/xhtml";let Le=de,At=!1,vt=null;const Qn=E({},[st,it,de],Ct);let at=E({},["mi","mo","mn","ms","mtext"]),ot=E({},["annotation-xml"]);const Yn=E({},["title","style","font","a","script"]);let ze=null;const Vn=["application/xhtml+xml","text/html"],Xn="text/html";let F=null,Ie=null;const Kn=t.createElement("form"),en=function(r){return r instanceof RegExp||r instanceof Function},Rt=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ie&&Ie===r)){if((!r||typeof r!="object")&&(r={}),r=we(r),ze=Vn.indexOf(r.PARSER_MEDIA_TYPE)===-1?Xn:r.PARSER_MEDIA_TYPE,F=ze==="application/xhtml+xml"?Ct:ft,z=ae(r,"ALLOWED_TAGS")?E({},r.ALLOWED_TAGS,F):f,u=ae(r,"ALLOWED_ATTR")?E({},r.ALLOWED_ATTR,F):w,vt=ae(r,"ALLOWED_NAMESPACES")?E({},r.ALLOWED_NAMESPACES,Ct):Qn,Et=ae(r,"ADD_URI_SAFE_ATTR")?E(we(Jt),r.ADD_URI_SAFE_ATTR,F):Jt,Xt=ae(r,"ADD_DATA_URI_TAGS")?E(we(Kt),r.ADD_DATA_URI_TAGS,F):Kt,Re=ae(r,"FORBID_CONTENTS")?E({},r.FORBID_CONTENTS,F):Vt,R=ae(r,"FORBID_TAGS")?E({},r.FORBID_TAGS,F):{},y=ae(r,"FORBID_ATTR")?E({},r.FORBID_ATTR,F):{},ve=ae(r,"USE_PROFILES")?r.USE_PROFILES:!1,O=r.ALLOW_ARIA_ATTR!==!1,v=r.ALLOW_DATA_ATTR!==!1,xe=r.ALLOW_UNKNOWN_PROTOCOLS||!1,tt=r.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fe=r.SAFE_FOR_TEMPLATES||!1,Pe=r.SAFE_FOR_XML!==!1,_e=r.WHOLE_DOCUMENT||!1,Ae=r.RETURN_DOM||!1,nt=r.RETURN_DOM_FRAGMENT||!1,rt=r.RETURN_TRUSTED_TYPE||!1,Tt=r.FORCE_BODY||!1,Qt=r.SANITIZE_DOM!==!1,Yt=r.SANITIZE_NAMED_PROPS||!1,St=r.KEEP_CONTENT!==!1,$e=r.IN_PLACE||!1,et=r.ALLOWED_URI_REGEXP||Wn,Le=r.NAMESPACE||de,at=r.MATHML_TEXT_INTEGRATION_POINTS||at,ot=r.HTML_INTEGRATION_POINTS||ot,T=r.CUSTOM_ELEMENT_HANDLING||{},r.CUSTOM_ELEMENT_HANDLING&&en(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(T.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&en(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(T.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(T.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fe&&(v=!1),nt&&(Ae=!0),ve&&(z=E({},Sn),u=[],ve.html===!0&&(E(z,Tn),E(u,En)),ve.svg===!0&&(E(z,Ot),E(u,Dt),E(u,ht)),ve.svgFilters===!0&&(E(z,Nt),E(u,Dt),E(u,ht)),ve.mathMl===!0&&(E(z,Mt),E(u,An),E(u,ht))),r.ADD_TAGS&&(z===f&&(z=we(z)),E(z,r.ADD_TAGS,F)),r.ADD_ATTR&&(u===w&&(u=we(u)),E(u,r.ADD_ATTR,F)),r.ADD_URI_SAFE_ATTR&&E(Et,r.ADD_URI_SAFE_ATTR,F),r.FORBID_CONTENTS&&(Re===Vt&&(Re=we(Re)),E(Re,r.FORBID_CONTENTS,F)),St&&(z["#text"]=!0),_e&&E(z,["html","head","body"]),z.table&&(E(z,["tbody"]),delete R.tbody),r.TRUSTED_TYPES_POLICY){if(typeof r.TRUSTED_TYPES_POLICY.createHTML!="function")throw je('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof r.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw je('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=r.TRUSTED_TYPES_POLICY,X=C.createHTML("")}else C===void 0&&(C=ys(x,a)),C!==null&&typeof X=="string"&&(X=C.createHTML(""));Q&&Q(r),Ie=r}},tn=E({},[...Ot,...Nt,...us]),nn=E({},[...Mt,...ps]),Jn=function(r){let h=U(r);(!h||!h.tagName)&&(h={namespaceURI:Le,tagName:"template"});const m=ft(r.tagName),D=ft(h.tagName);return vt[r.namespaceURI]?r.namespaceURI===it?h.namespaceURI===de?m==="svg":h.namespaceURI===st?m==="svg"&&(D==="annotation-xml"||at[D]):!!tn[m]:r.namespaceURI===st?h.namespaceURI===de?m==="math":h.namespaceURI===it?m==="math"&&ot[D]:!!nn[m]:r.namespaceURI===de?h.namespaceURI===it&&!ot[D]||h.namespaceURI===st&&!at[D]?!1:!nn[m]&&(Yn[m]||!tn[m]):!!(ze==="application/xhtml+xml"&&vt[r.namespaceURI]):!1},le=function(r){Ge(e.removed,{element:r});try{U(r).removeChild(r)}catch{G(r)}},lt=function(r,h){try{Ge(e.removed,{attribute:h.getAttributeNode(r),from:h})}catch{Ge(e.removed,{attribute:null,from:h})}if(h.removeAttribute(r),r==="is")if(Ae||nt)try{le(h)}catch{}else try{h.setAttribute(r,"")}catch{}},rn=function(r){let h=null,m=null;if(Tt)r="<remove></remove>"+r;else{const H=wn(r,/^[\r\n\t ]+/);m=H&&H[0]}ze==="application/xhtml+xml"&&Le===de&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");const D=C?C.createHTML(r):r;if(Le===de)try{h=new g().parseFromString(D,ze)}catch{}if(!h||!h.documentElement){h=me.createDocument(Le,"template",null);try{h.documentElement.innerHTML=At?X:D}catch{}}const W=h.body||h.documentElement;return r&&m&&W.insertBefore(t.createTextNode(m),W.childNodes[0]||null),Le===de?Oe.call(h,_e?"html":"body")[0]:_e?h.documentElement:W},sn=function(r){return be.call(r.ownerDocument||r,r,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},Lt=function(r){return r instanceof b&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof c)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function"||typeof r.hasChildNodes!="function")},an=function(r){return typeof o=="function"&&r instanceof o};function he(k,r,h){dt(k,m=>{m.call(e,r,h,Ie)})}const on=function(r){let h=null;if(he($.beforeSanitizeElements,r,null),Lt(r))return le(r),!0;const m=F(r.nodeName);if(he($.uponSanitizeElement,r,{tagName:m,allowedTags:z}),r.hasChildNodes()&&!an(r.firstElementChild)&&Z(/<[/\w!]/g,r.innerHTML)&&Z(/<[/\w!]/g,r.textContent)||r.nodeType===qe.progressingInstruction||Pe&&r.nodeType===qe.comment&&Z(/<[/\w]/g,r.data))return le(r),!0;if(!z[m]||R[m]){if(!R[m]&&cn(m)&&(T.tagNameCheck instanceof RegExp&&Z(T.tagNameCheck,m)||T.tagNameCheck instanceof Function&&T.tagNameCheck(m)))return!1;if(St&&!Re[m]){const D=U(r)||r.parentNode,W=K(r)||r.childNodes;if(W&&D){const H=W.length;for(let V=H-1;V>=0;--V){const ce=S(W[V],!0);ce.__removalCount=(r.__removalCount||0)+1,D.insertBefore(ce,ge(r))}}}return le(r),!0}return r instanceof p&&!Jn(r)||(m==="noscript"||m==="noembed"||m==="noframes")&&Z(/<\/no(script|embed|frames)/i,r.innerHTML)?(le(r),!0):(fe&&r.nodeType===qe.text&&(h=r.textContent,dt([ke,Ne,Me],D=>{h=We(h,D," ")}),r.textContent!==h&&(Ge(e.removed,{element:r.cloneNode()}),r.textContent=h)),he($.afterSanitizeElements,r,null),!1)},ln=function(r,h,m){if(Qt&&(h==="id"||h==="name")&&(m in t||m in Kn))return!1;if(!(v&&!y[h]&&Z(_t,h))){if(!(O&&Z(yt,h))){if(!u[h]||y[h]){if(!(cn(r)&&(T.tagNameCheck instanceof RegExp&&Z(T.tagNameCheck,r)||T.tagNameCheck instanceof Function&&T.tagNameCheck(r))&&(T.attributeNameCheck instanceof RegExp&&Z(T.attributeNameCheck,h)||T.attributeNameCheck instanceof Function&&T.attributeNameCheck(h))||h==="is"&&T.allowCustomizedBuiltInElements&&(T.tagNameCheck instanceof RegExp&&Z(T.tagNameCheck,m)||T.tagNameCheck instanceof Function&&T.tagNameCheck(m))))return!1}else if(!Et[h]){if(!Z(et,We(m,Je,""))){if(!((h==="src"||h==="xlink:href"||h==="href")&&r!=="script"&&as(m,"data:")===0&&Xt[r])){if(!(xe&&!Z(Ke,We(m,Je,"")))){if(m)return!1}}}}}}return!0},cn=function(r){return r!=="annotation-xml"&&wn(r,De)},un=function(r){he($.beforeSanitizeAttributes,r,null);const{attributes:h}=r;if(!h||Lt(r))return;const m={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:u,forceKeepAttr:void 0};let D=h.length;for(;D--;){const W=h[D],{name:H,namespaceURI:V,value:ce}=W,Be=F(H);let j=H==="value"?ce:os(ce);if(m.attrName=Be,m.attrValue=j,m.keepAttr=!0,m.forceKeepAttr=void 0,he($.uponSanitizeAttribute,r,m),j=m.attrValue,Yt&&(Be==="id"||Be==="name")&&(lt(H,r),j=qn+j),Pe&&Z(/((--!?|])>)|<\/(style|title)/i,j)){lt(H,r);continue}if(m.forceKeepAttr||(lt(H,r),!m.keepAttr))continue;if(!tt&&Z(/\/>/i,j)){lt(H,r);continue}fe&&dt([ke,Ne,Me],dn=>{j=We(j,dn," ")});const pn=F(r.nodeName);if(ln(pn,Be,j)){if(C&&typeof x=="object"&&typeof x.getAttributeType=="function"&&!V)switch(x.getAttributeType(pn,Be)){case"TrustedHTML":{j=C.createHTML(j);break}case"TrustedScriptURL":{j=C.createScriptURL(j);break}}try{V?r.setAttributeNS(V,H,j):r.setAttribute(H,j),Lt(r)?le(r):yn(e.removed)}catch{}}}he($.afterSanitizeAttributes,r,null)},er=function k(r){let h=null;const m=sn(r);for(he($.beforeSanitizeShadowDOM,r,null);h=m.nextNode();)he($.uponSanitizeShadowNode,h,null),on(h),un(h),h.content instanceof i&&k(h.content);he($.afterSanitizeShadowDOM,r,null)};return e.sanitize=function(k){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=null,m=null,D=null,W=null;if(At=!k,At&&(k="<!-->"),typeof k!="string"&&!an(k))if(typeof k.toString=="function"){if(k=k.toString(),typeof k!="string")throw je("dirty is not a string, aborting")}else throw je("toString is not a function");if(!e.isSupported)return k;if(wt||Rt(r),e.removed=[],typeof k=="string"&&($e=!1),$e){if(k.nodeName){const ce=F(k.nodeName);if(!z[ce]||R[ce])throw je("root node is forbidden and cannot be sanitized in-place")}}else if(k instanceof o)h=rn("<!---->"),m=h.ownerDocument.importNode(k,!0),m.nodeType===qe.element&&m.nodeName==="BODY"||m.nodeName==="HTML"?h=m:h.appendChild(m);else{if(!Ae&&!fe&&!_e&&k.indexOf("<")===-1)return C&&rt?C.createHTML(k):k;if(h=rn(k),!h)return Ae?null:rt?X:""}h&&Tt&&le(h.firstChild);const H=sn($e?k:h);for(;D=H.nextNode();)on(D),un(D),D.content instanceof i&&er(D.content);if($e)return k;if(Ae){if(nt)for(W=oe.call(h.ownerDocument);h.firstChild;)W.appendChild(h.firstChild);else W=h;return(u.shadowroot||u.shadowrootmode)&&(W=Xe.call(n,W,!0)),W}let V=_e?h.outerHTML:h.innerHTML;return _e&&z["!doctype"]&&h.ownerDocument&&h.ownerDocument.doctype&&h.ownerDocument.doctype.name&&Z(jn,h.ownerDocument.doctype.name)&&(V="<!DOCTYPE "+h.ownerDocument.doctype.name+`>
`+V),fe&&dt([ke,Ne,Me],ce=>{V=We(V,ce," ")}),C&&rt?C.createHTML(V):V},e.setConfig=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rt(k),wt=!0},e.clearConfig=function(){Ie=null,wt=!1},e.isValidAttribute=function(k,r,h){Ie||Rt({});const m=F(k),D=F(r);return ln(m,D,h)},e.addHook=function(k,r){typeof r=="function"&&Ge($[k],r)},e.removeHook=function(k,r){if(r!==void 0){const h=ss($[k],r);return h===-1?void 0:is($[k],h,1)[0]}return yn($[k])},e.removeHooks=function(k){$[k]=[]},e.removeAllHooks=function(){$=Rn()},e}var ws=Zn();const Ts={class:"p-4 sm:p-6 lg:p-8"},Ss={key:0,class:"text-center py-16"},Es={key:1,class:"error-box p-6"},As={class:"text-red-700 dark:text-red-400"},vs={key:0,class:"mt-2 text-sm bg-red-100 dark:bg-red-900/50 p-2 rounded overflow-x-auto"},Rs={key:2,class:"space-y-8"},Ls={class:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4"},Is={class:"font-mono text-2xl text-primary-600 dark:text-primary-400"},Cs={class:"p-5 bg-white dark:bg-gray-800 rounded-lg shadow-md border dark:border-gray-700"},Os={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 text-sm mt-4"},Ns={class:"space-y-2"},Ms={class:"space-y-2"},Ds={class:"font-medium text-gray-900 dark:text-gray-100"},Ps={class:"font-medium text-gray-900 dark:text-gray-100"},$s={class:"font-medium text-gray-900 dark:text-gray-100"},zs={class:"space-y-2"},Bs={class:"text-xl font-semibold text-gray-800 dark:text-gray-200 border-b pb-2 dark:border-gray-700"},Us={key:0},Fs={key:1},Hs={key:0,class:"info-box"},Gs={key:1,class:"info-box"},Ws={class:"flex justify-between items-baseline mb-3 border-b dark:border-gray-600 pb-2"},js={class:"question-number text-sm font-semibold text-gray-600 dark:text-gray-400"},Zs={class:"text-xs font-mono text-gray-400 dark:text-gray-500"},qs={class:"text-xs font-medium text-gray-500 dark:text-gray-300"},Qs=["innerHTML"],Ys={class:"student-answer-box mt-3 mb-4"},Vs={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap min-h-[40px]"},Xs={class:"grading-input-area mt-4"},Ks=["for"],Js={class:"flex items-center"},ei=["id","onUpdate:modelValue","max","disabled","onInput"],ti={class:"text-base font-medium text-gray-500 dark:text-gray-400 ms-2"},ni=["id"],ri={key:1,class:"mt-1 text-xs text-green-600 dark:text-green-400"},si={key:2,class:"pt-6 border-t dark:border-gray-700 sticky bottom-0 bg-gradient-to-t from-white dark:from-gray-900 pb-4 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8"},ii={class:"bg-gray-100 dark:bg-gray-700/50 p-4 rounded-lg mb-4 border dark:border-gray-600 flex flex-col sm:flex-row justify-between items-center gap-4"},ai={class:"text-center sm:text-right"},oi={class:"text-2xl font-bold text-primary-700 dark:text-primary-400"},li={class:"text-lg font-medium text-gray-500 dark:text-gray-400"},ci={class:"flex-shrink-0 w-full sm:w-auto"},ui=["disabled"],pi={key:0,class:"text-yellow-700 dark:text-yellow-400 text-xs text-center sm:text-right mt-1"},di={key:1,class:"text-red-600 dark:text-red-400 text-sm text-center sm:text-right mt-1"},hi={key:3,class:"text-center mt-6"},fi=Ln({__name:"[attemptId]",async setup(d){let e,t;const n=ir(),a=ar(),i=J(()=>{const f=parseInt(a.params.attemptId,10);if(isNaN(f)||f<=0)throw ut({statusCode:400,statusMessage:"معرف المحاولة غير صالح أو مفقود.",fatal:!0});return f}),s=Ue(null),o=Ue(null),p=Ue(null),l=Ue([]),c=Ue(null),b=hn({}),g=hn({}),x=It(!1),A=It(null),S=It(null),{data:G,pending:ge,error:K}=([e,t]=or(async()=>gr(`admin-grading-attempt-details-${i.value}`,async()=>{const f=i.value;console.log(`Fetching details for attempt ${f}`),S.value=null;const{data:u,error:w}=await n.from("quiz_attempts").select("*").eq("id",f).maybeSingle();if(w)throw console.error("Error fetching attempt:",w),S.value="فشل في جلب بيانات المحاولة من قاعدة البيانات.",ut({statusCode:500,message:S.value,fatal:!1});if(!u)throw S.value="لم يتم العثور على المحاولة المطلوبة بالمعرف المحدد.",ut({statusCode:404,message:S.value,fatal:!1});let T={};u.answers&&typeof u.answers=="object"&&!Array.isArray(u.answers)?T={...u.answers}:u.answers&&console.warn(`Attempt ${u.id} has non-object 'answers' field:`,u.answers),u.answers_parsed=T;const[R,y,O]=await Promise.all([n.from("quizzes").select("*, study_courses(id, title)").eq("id",u.quiz_id).maybeSingle(),n.from("profiles").select("id, full_name").eq("id",u.user_id).maybeSingle(),n.from("quiz_questions").select("*").eq("quiz_id",u.quiz_id).order("question_order")]).catch(Pe=>{throw console.error("Error during parallel fetches:",Pe),S.value="حدث خطأ أثناء جلب البيانات المرتبطة (الاختبار، الطالب، أو الأسئلة).",ut({statusCode:500,message:S.value,fatal:!1})}),v=(R==null?void 0:R.data)??null;R!=null&&R.error&&console.error("Error fetching quiz:",R.error);const xe=(y==null?void 0:y.data)??null;y!=null&&y.error&&console.error("Error fetching student profile:",y.error);const tt=(O==null?void 0:O.data)??[];O!=null&&O.error&&console.error("Error fetching questions:",O.error);const fe=(v==null?void 0:v.study_courses)??null;return v||console.warn(`Quiz data not found for quiz ID: ${u.quiz_id}`),xe||console.warn(`Student profile not found for user ID: ${u.user_id}`),{attempt:u,quiz:v,student:xe,allQuestions:tt,course:fe}},{default:()=>({attempt:null,quiz:null,student:null,allQuestions:[],course:null}),watch:[i]})),e=await e,t(),e);lr(G,f=>{var u;if(s.value=null,o.value=null,p.value=null,l.value=[],c.value=null,Object.keys(b).forEach(w=>delete b[w]),Object.keys(g).forEach(w=>delete g[w]),f!=null&&f.attempt&&f.allQuestions){console.log("Watcher: Data received, updating state and initializing scores."),s.value=f.attempt,o.value=f.quiz,p.value=f.student,l.value=f.allQuestions,c.value=f.course;const w=f.allQuestions.filter(T=>T.type==="written");if(w.length>0){console.log(`Watcher: Initializing scores for ${w.length} written questions.`);const T=((u=f.attempt.answers_parsed)==null?void 0:u.manual_score_map)??{};w.forEach(R=>{R.id!==void 0&&R.id!==null?(b[R.id]=typeof T[R.id]=="number"?T[R.id]:null,g[R.id]=null):console.warn("Watcher: Question found without a valid ID during score initialization:",R)}),console.log("Watcher: Manual scores initialized:",JSON.parse(JSON.stringify(b)))}else console.log("Watcher: No written questions found in newData to initialize scores for.")}else K.value?console.log("Watcher: Load error detected, state update skipped."):console.log("Watcher: Fetched data is null or incomplete, state cleared.")},{immediate:!0});const U=J(()=>l.value.filter(f=>f.type==="written")),C=J(()=>{var f;return((f=s.value)==null?void 0:f.grading_status)==="graded"?[]:U.value.filter(u=>b[u.id]===null||b[u.id]===void 0)}),X=J(()=>l.value.reduce((f,u)=>f+(u.points??1),0)),me=J(()=>l.value.filter(f=>f.type!=="written").reduce((f,u)=>f+(u.points??1),0)),be=J(()=>U.value.reduce((f,u)=>f+(u.points??1),0)),oe=J(()=>Object.entries(b).reduce((f,[u,w])=>U.value.some(R=>R.id.toString()===u)&&typeof w=="number"&&!isNaN(w)&&g[u]===null?f+w:f,0)),Oe=J(()=>{var u;return(((u=s.value)==null?void 0:u.score)??0)+oe.value}),Xe=J(()=>{const f=X.value;if(f<=0)return 0;const u=Oe.value/f*100;return Math.round(u*10)/10}),$=J(()=>!o.value||typeof o.value.pass_mark_percentage!="number"?null:Xe.value>=o.value.pass_mark_percentage),ke=J(()=>C.value.every(f=>typeof b[f.id]=="number")),Ne=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return console.warn("Failed to format date:",f),f}},Me=f=>{switch(f){case"pending":return"قيد المراجعة (آلي)";case"auto_graded":return"تم التصحيح آليًا";case"pending_manual":return"يحتاج تصحيحًا يدويًا";case"graded":return"تم التصحيح بالكامل";default:return"غير معروف"}},_t=f=>{const u="px-2.5 py-0.5 rounded-full text-xs font-medium inline-block";switch(f){case"pending_manual":return`${u} bg-yellow-100 text-yellow-800 dark:bg-yellow-900/70 dark:text-yellow-200 border border-yellow-300 dark:border-yellow-700`;case"graded":return`${u} bg-green-100 text-green-800 dark:bg-green-900/70 dark:text-green-200 border border-green-300 dark:border-green-700`;case"auto_graded":return`${u} bg-blue-100 text-blue-800 dark:bg-blue-900/70 dark:text-blue-200 border border-blue-300 dark:border-blue-700`;case"pending":return`${u} bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600`;default:return`${u} bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-400 border border-gray-400 dark:border-gray-500`}},yt=f=>{var u,w;return((w=(u=s.value)==null?void 0:u.answers_parsed)==null?void 0:w[f])??null},Ke=f=>{var u,w,T;return typeof((T=(w=(u=s.value)==null?void 0:u.answers_parsed)==null?void 0:w.manual_score_map)==null?void 0:T[f])=="number"},Je=f=>{if(!f)return"";L.setOptions({breaks:!0,gfm:!0});const u=L.parse(f);return ws.sanitize(u,{USE_PROFILES:{html:!0}})},De=(f,u)=>{const w=b[f];if(w==null||w===""){g[f]=null;return}if(isNaN(w)){g[f]="الدرجة يجب أن تكون رقماً.";return}if(w<0||w>u){g[f]=`الدرجة يجب أن تكون بين 0 و ${u}.`;return}if(w*10%5!==0){g[f]="الدرجة يجب أن تكون بمضاعفات 0.5 (مثل 0, 0.5, 1, 1.5...).";return}g[f]=null},et=()=>{let f=!0;return U.value.forEach(u=>{const w=b[u.id],T=u.points??1;C.value.some(R=>R.id===u.id)?w==null||w===""?(g[u.id]="الدرجة مطلوبة لهذا السؤال.",f=!1):(De(u.id,T),g[u.id]!==null&&(f=!1)):w!=null&&w!==""?(De(u.id,T),g[u.id]!==null&&(f=!1)):(console.warn(`Question ${u.id} was likely graded but score is now empty. Ignoring for submission.`),g[u.id]=null)}),f},z=async()=>{if(!s.value||!o.value||x.value){console.warn("Submission blocked: Missing data or already saving.");return}if(s.value.grading_status==="graded"){A.value="لا يمكن الإرسال، تم تصحيح هذه المحاولة بالفعل.";return}if(U.value.length===0){A.value="لا توجد أسئلة كتابية لتصحيحها في هذا الاختبار.";return}if(A.value=null,!et()){A.value="يرجى مراجعة الدرجات المدخلة وتصحيح الأخطاء المميزة.";const O=Object.keys(g).find(v=>g[v]!==null);if(O){const v=document.getElementById(`score-${O}`);v==null||v.focus(),v==null||v.scrollIntoView({behavior:"smooth",block:"center"})}return}if(!ke.value){A.value="يرجى إدخال درجة لجميع الأسئلة الكتابية التي لم يتم تصحيحها بعد.";const O=C.value[0];if(O){const v=document.getElementById(`score-${O.id}`);v==null||v.focus(),v==null||v.scrollIntoView({behavior:"smooth",block:"center"})}return}x.value=!0;const f=oe.value,u=Oe.value,w=$.value??!1,T={};Object.entries(b).forEach(([O,v])=>{typeof v=="number"&&!isNaN(v)&&U.value.some(xe=>xe.id.toString()===O)&&(T[O]=v)});const R=s.value.answers_parsed??{},y={manual_score:f,total_score:u,grading_status:"graded",passed:w,answers:{...R,manual_score_map:T}};console.log(`Submitting final grades for attempt ${s.value.id}:`,y);try{const{error:O}=await n.from("quiz_attempts").update(y).eq("id",s.value.id).select("id").single();if(O)throw O;console.log("Manual grades submitted successfully!"),alert("تم حفظ التصحيح بنجاح!"),await fr("/admin/grading")}catch(O){console.error("Error saving manual grades:",O),A.value=`فشل حفظ التصحيح: ${O.message||"حدث خطأ غير متوقع في الاتصال بالخادم."}`}finally{x.value=!1}};return mr({title:J(()=>ge.value?"جاري تحميل التصحيح...":s.value?`تصحيح محاولة #${s.value.id}`:"تصحيح محاولة"),meta:[{name:"description",content:"صفحة لتصحيح المحاولات الكتابية للاختبارات"}]}),(f,u)=>{var T,R;const w=rr;return P(),B("div",Ts,[ee(w,{to:"/admin/grading",class:"inline-flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 mb-4 transition-colors duration-150 ease-in-out group"},{default:ye(()=>u[0]||(u[0]=[_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5 me-1 transform transition-transform duration-150 ease-in-out group-hover:-translate-x-0.5"},[_("path",{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 0 1-.02 1.06L8.832 10l3.938 3.71a.75.75 0 1 1-1.04 1.08l-4.5-4.25a.75.75 0 0 1 0-1.08l4.5-4.25a.75.75 0 0 1 1.06.02Z","clip-rule":"evenodd"})],-1),ue(" العودة لقائمة التصحيح ")])),_:1}),Ce(ge)?(P(),B("div",Ss,[ee(fn,{class:"w-10 h-10 text-primary mx-auto"}),u[1]||(u[1]=_("p",{class:"mt-4 text-lg text-gray-500 dark:text-gray-400"},"جارٍ تحميل تفاصيل المحاولة...",-1))])):Ce(K)||!s.value?(P(),B("div",Es,[u[3]||(u[3]=_("h2",{class:"text-xl font-semibold text-red-800 dark:text-red-300 mb-3"},"خطأ في التحميل",-1)),_("p",As,M(S.value||"حدث خطأ غير متوقع أثناء تحميل بيانات المحاولة."),1),Ce(K)&&Ce(K).message&&S.value!==Ce(K).message?(P(),B("pre",vs,M(Ce(K).message),1)):te("",!0),ee(w,{to:"/admin/grading",class:"button-secondary mt-6"},{default:ye(()=>u[2]||(u[2]=[ue("العودة للقائمة")])),_:1})])):(P(),B("div",Rs,[_("h1",Ls,[u[4]||(u[4]=ue(" تصحيح محاولة: ")),_("span",Is,"#"+M(s.value.id),1)]),_("div",Cs,[u[5]||(u[5]=_("h2",{class:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200 border-b dark:border-gray-600 pb-2"},"تفاصيل المحاولة والمعلومات الأساسية",-1)),_("div",Os,[_("div",Ns,[ee(ne,{label:"معرف المحاولة:",value:`#${s.value.id}`,valueClass:"font-mono"},null,8,["value"]),ee(ne,{label:"تاريخ الإرسال:",value:Ne(s.value.submitted_at)},null,8,["value"]),ee(ne,{label:"الحالة الحالية:"},{default:ye(()=>[_("span",{class:Te(_t(s.value.grading_status))},M(Me(s.value.grading_status)),3)]),_:1})]),_("div",Ms,[ee(ne,{label:"الطالب:"},{default:ye(()=>{var y;return[_("span",Ds,M(((y=p.value)==null?void 0:y.full_name)??`مستخدم (${s.value.user_id.substring(0,8)}...)`),1)]}),_:1}),ee(ne,{label:"الاختبار:"},{default:ye(()=>{var y;return[_("span",Ps,M(((y=o.value)==null?void 0:y.title)??"اختبار غير متاح"),1)]}),_:1}),ee(ne,{label:"الدورة التدريبية:"},{default:ye(()=>{var y;return[_("span",$s,M(((y=c.value)==null?void 0:y.title)??"غير محدد"),1)]}),_:1})]),_("div",zs,[ee(ne,{label:"الدرجة الآلية:",value:`${s.value.score??0} / ${me.value}`},null,8,["value"]),s.value.grading_status==="graded"?(P(),ct(ne,{key:0,label:"الدرجة اليدوية (المسجلة):",value:`${s.value.manual_score??"-"} / ${be.value}`},null,8,["value"])):te("",!0),s.value.grading_status==="graded"?(P(),ct(ne,{key:1,label:"الدرجة الإجمالية (المسجلة):",value:`${s.value.total_score??"-"} / ${X.value}`},null,8,["value"])):te("",!0),ee(ne,{label:"إجمالي نقاط الاختبار:",value:X.value.toString()},null,8,["value"]),ee(ne,{label:"علامة النجاح:",value:`${((T=o.value)==null?void 0:T.pass_mark_percentage)??"N/A"}%`},null,8,["value"]),s.value.grading_status==="graded"?(P(),ct(ne,{key:2,label:"نتيجة الاختبار (المسجلة):"},{default:ye(()=>[_("span",{class:Te(s.value.passed?"text-green-600 dark:text-green-400 font-semibold":"text-red-600 dark:text-red-400 font-semibold")},M(s.value.passed?"ناجح":"راسب"),3)]),_:1})):te("",!0)])])]),_("form",{onSubmit:pr(z,["prevent"]),class:"space-y-6"},[_("h2",Bs,[u[6]||(u[6]=ue(" الأسئلة الكتابية ")),C.value.length>0?(P(),B("span",Us,"(مطلوب تصحيح "+M(C.value.length)+" سؤال)",1)):U.value.length>0&&C.value.length===0?(P(),B("span",Fs,"(جميع الأسئلة الكتابية مصححة)")):te("",!0)]),U.value.length===0?(P(),B("div",Hs,u[7]||(u[7]=[_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-10 h-10 mx-auto text-gray-400 mb-2"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),ue(" لا توجد أسئلة كتابية في هذا الاختبار. ")]))):C.value.length===0&&s.value.grading_status==="graded"?(P(),B("div",Gs,u[8]||(u[8]=[_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-10 h-10 mx-auto text-green-500 mb-2"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),ue(" تم تصحيح جميع الأسئلة الكتابية لهذه المحاولة بالفعل. ")]))):te("",!0),(P(!0),B(cr,null,ur(U.value,(y,O)=>(P(),B("div",{key:y.id,class:Te(["p-4 md:p-5 bg-gray-50 dark:bg-gray-800/50 rounded-lg border dark:border-gray-700 shadow-sm transition-all duration-150 ease-in-out",{"border-primary-500 dark:border-primary-600 ring-1 ring-primary-500 dark:ring-primary-600":Ke(y.id),"border-red-500 dark:border-red-600 ring-1 ring-red-500 dark:ring-red-600":g[y.id]}])},[_("div",Ws,[_("p",js,[ue(" السؤال الكتابي #"+M(O+1)+" ",1),_("span",Zs,"("+M(y.id)+")",1)]),_("span",qs,"النقاط المتاحة: "+M(y.points??1),1)]),_("div",{class:"question-text text-base font-medium text-gray-800 dark:text-gray-200 mb-4 prose prose-sm dark:prose-invert max-w-none",innerHTML:Je(y.question_text??"")},null,8,Qs),_("div",Ys,[u[9]||(u[9]=_("p",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1"},"إجابة الطالب:",-1)),_("p",Vs,M(yt(y.id)||"-- لا توجد إجابة --"),1)]),_("div",Xs,[_("label",{for:`score-${y.id}`,class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"الدرجة الممنوحة:",8,Ks),_("div",Js,[dr(_("input",{type:"number",id:`score-${y.id}`,"onUpdate:modelValue":v=>b[y.id]=v,max:y.points??1,min:"0",step:"0.5",required:"",class:Te(["input-field w-28 text-center text-base font-medium appearance-none",{"border-red-500 dark:border-red-600 ring-1 ring-red-500 dark:ring-red-600 focus:ring-red-500 focus:border-red-500":g[y.id]}]),disabled:x.value||s.value.grading_status==="graded",onInput:v=>De(y.id,y.points??1),"aria-describedby":"score-error-{{question.id}}",placeholder:"0"},null,42,ei),[[hr,b[y.id],void 0,{number:!0}]]),_("span",ti," / "+M(y.points??1),1)]),g[y.id]?(P(),B("p",{key:0,id:`score-error-${y.id}`,class:"mt-1 text-xs text-red-600 dark:text-red-400"},M(g[y.id]),9,ni)):Ke(y.id)?(P(),B("p",ri,"تم حفظ الدرجة.")):te("",!0)])],2))),128)),s.value.grading_status!=="graded"&&U.value.length>0?(P(),B("div",si,[_("div",ii,[_("div",ai,[u[10]||(u[10]=_("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"النتيجة النهائية (تقديرية):",-1)),_("p",oi,[ue(M(Oe.value)+" / "+M(X.value)+" ",1),_("span",li,"("+M(Xe.value)+"%)",1)]),$.value!==null?(P(),B("p",{key:0,class:Te(["text-sm font-medium",$.value?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},M($.value?"ناجح":"راسب")+" (علامة النجاح: "+M(((R=o.value)==null?void 0:R.pass_mark_percentage)??"N/A")+"%) ",3)):te("",!0)]),_("div",ci,[_("button",{type:"submit",class:"button-primary w-full sm:w-auto",disabled:x.value||Object.values(g).some(y=>y!==null)||!ke.value,"aria-label":"حفظ التصحيح وإنهاء المراجعة"},[x.value?(P(),ct(fn,{key:0,class:"w-5 h-5 me-2 animate-spin"})):te("",!0),ue(" "+M(x.value?"جارٍ الحفظ...":C.value.length>0?`حفظ تصحيح ${C.value.length} سؤال`:"حفظ التصحيح وإنهاء المراجعة"),1)],8,ui)])]),!ke.value&&C.value.length>0?(P(),B("p",pi," يجب إدخال درجة لجميع الأسئلة المطلوب تصحيحها. ")):te("",!0),A.value?(P(),B("p",di,M(A.value),1)):te("",!0)])):s.value.grading_status==="graded"?(P(),B("div",hi,u[11]||(u[11]=[_("p",{class:"text-lg font-medium text-green-700 dark:text-green-400"},"تم تصحيح هذه المحاولة بالكامل.",-1)]))):te("",!0)],32)]))])}}}),yi=In(fi,[["__scopeId","data-v-7f98cce7"]]);export{yi as default};
