{"file":"forgot-password.vue2.mjs","mappings":";;;;;;;;AAoDe,sBAAkB;AAC3B,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,UAAU,IAAI,KAAK;AACnB,UAAA,UAAU,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/forgot-password.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8\">\r\n    <div class=\"w-full max-w-md space-y-8 bg-white p-8 md:p-10 rounded-lg shadow border border-cream-gray\">\r\n      <div>\r\n        <h2 class=\"mt-6 text-center text-3xl font-bold tracking-tight text-brown-dark\">\r\n          نسيت كلمة المرور؟\r\n        </h2>\r\n        <p class=\"mt-2 text-center text-sm text-gray-600\">\r\n          أدخل بريدك الإلكتروني المسجل وسنرسل لك رابطًا لإعادة تعيين كلمة المرور.\r\n        </p>\r\n      </div>\r\n      <form class=\"mt-8 space-y-6\" @submit.prevent=\"handleForgotPassword\">\r\n        <!-- رسائل الخطأ أو النجاح -->\r\n        <div v-if=\"message\" :class=\"isError ? 'text-red-600' : 'text-green-600'\" class=\"text-center text-sm mb-4 p-2 bg-opacity-10 rounded\" :style=\"{ backgroundColor: isError ? 'rgba(239, 68, 68, 0.1)' : 'rgba(34, 197, 94, 0.1)' }\">\r\n          {{ message }}\r\n        </div>\r\n\r\n        <div class=\"rounded-md shadow-sm\">\r\n          <div>\r\n            <label for=\"email-address\" class=\"sr-only\">البريد الإلكتروني</label>\r\n            <input id=\"email-address\" name=\"email\" type=\"email\" v-model=\"email\" autocomplete=\"email\" required\r\n                   class=\"relative block w-full appearance-none rounded-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm\"\r\n                   placeholder=\"البريد الإلكتروني المسجل\">\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <button type=\"submit\" :disabled=\"loading\"\r\n                  class=\"group relative flex w-full justify-center rounded-md border border-transparent bg-olive-green py-2 px-4 text-sm font-medium text-white hover:bg-opacity-85 focus:outline-none focus:ring-2 focus:ring-olive-green focus:ring-offset-2 disabled:opacity-50\">\r\n            <span v-if=\"loading\" class=\"absolute inset-y-0 left-0 flex items-center pl-3\">\r\n               <svg class=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                 <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n                 <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n               </svg>\r\n            </span>\r\n            <span :class=\"{ 'opacity-0': loading }\">إرسال رابط إعادة التعيين</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"text-sm text-center\">\r\n          <NuxtLink to=\"/login\" class=\"font-medium text-olive-green hover:underline\">\r\n            العودة لتسجيل الدخول\r\n          </NuxtLink>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { useSupabaseClient } from '#imports'\r\n\r\nconst client = useSupabaseClient()\r\nconst email = ref('')\r\nconst message = ref('')\r\nconst isError = ref(false)\r\nconst loading = ref(false)\r\n\r\nconst handleForgotPassword = async () => {\r\n  loading.value = true\r\n  message.value = ''\r\n  isError.value = false\r\n\r\n  // نحتاج لتحديد رابط صفحة إعادة التعيين التي سننشئها تاليًا\r\n  // يجب أن يتطابق هذا المسار مع الصفحة التي ستتعامل مع رمز إعادة التعيين\r\n  // تأكد من أن هذا المسار موجود في redirectTo ضمن خيارات الوحدة إذا كنت تستخدمها\r\n  const resetPasswordUrl = `${window.location.origin}/reset-password`\r\n\r\n  const { error } = await client.auth.resetPasswordForEmail(email.value, {\r\n    redirectTo: resetPasswordUrl,\r\n  })\r\n\r\n  loading.value = false\r\n\r\n  if (error) {\r\n    console.error('Forgot Password Error:', error.message)\r\n    // لا تخبر المستخدم إذا كان البريد موجودًا أم لا لأسباب أمنية\r\n    message.value = 'إذا كان هذا البريد الإلكتروني مسجلاً، فقد تم إرسال رابط إعادة التعيين إليه.'\r\n    isError.value = false // نعرضها كرسالة نجاح دائمًا\r\n  } else {\r\n    message.value = 'إذا كان هذا البريد الإلكتروني مسجلاً، فقد تم إرسال رابط إعادة التعيين إليه.'\r\n    isError.value = false\r\n  }\r\n}\r\n</script>"],"version":3}