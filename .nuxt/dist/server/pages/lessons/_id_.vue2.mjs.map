{"version":3,"file":"_id_.vue2.mjs","sources":["../../../../../pages/lessons/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto px-4 \">\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"pending\" class=\"text-center py-20\">\r\n      <LoadingSpinner />\r\n      <p class=\"mt-4 text-gray-600 dark:text-gray-400\">جارٍ تحميل بيانات الدرس...</p>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <div v-else-if=\"error || !lesson\" class=\"text-center py-20 max-w-2xl mx-auto\">\r\n      <h2 v-if=\"error?.statusCode === 404\" class=\"text-2xl font-semibold text-red-600 dark:text-red-400 mb-4\">\r\n        الدرس غير موجود\r\n      </h2>\r\n      <h2 v-else class=\"text-2xl font-semibold text-red-600 dark:text-red-400 mb-4\">\r\n        حدث خطأ\r\n      </h2>\r\n      <p class=\"text-gray-600 dark:text-gray-400 mb-6\">\r\n        {{ error?.statusMessage || 'لم نتمكن من العثور على الدرس المطلوب أو حدث خطأ أثناء تحميله.' }}\r\n      </p>\r\n      <NuxtLink\r\n        to=\"/lessons\"\r\n        class=\"inline-flex items-center justify-center px-6 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-900 transition-colors\"\r\n        :style=\"{ backgroundColor: 'var(--color-olive-green)' }\"\r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"w-5 h-5 ms-2\" aria-hidden=\"true\" focusable=\"false\">\r\n          <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.25-7.25a.75.75 0 0 0 0-1.5H8.66l2.1-1.95a.75.75 0 1 0-1.02-1.1l-3.5 3.25a.75.75 0 0 0 0 1.1l3.5 3.25a.75.75 0 0 0 1.02-1.1l-2.1-1.95h4.59Z\" clip-rule=\"evenodd\" />\r\n        </svg>\r\n        <span>العودة إلى قائمة الدروس</span>\r\n      </NuxtLink>\r\n    </div>\r\n\r\n    <!-- Lesson Details Display -->\r\n    <div v-else class=\"lesson-details max-w-5xl mx-auto space-y-6\">\r\n      <h1 class=\"text-3xl font-bold text-brown-dark dark:text-brown-dark text-center sm:text-right\">\r\n        {{ lesson.title }}\r\n      </h1>\r\n\r\n      <!-- Video Section with Navigation Buttons -->\r\n      <div class=\"video-section flex items-center gap-2 sm:gap-4\">\r\n        <!-- Previous Button -->\r\n        <div class=\"flex-shrink-0\">\r\n          <NuxtLink\r\n            v-if=\"lesson.category_id && previousLesson\"\r\n            :to=\"`/lessons/${previousLesson.id}`\"\r\n            class=\"w-11 h-11 sm:w-14 sm:h-14 flex items-center justify-center rounded-full text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900\"\r\n            :title=\"`الدرس السابق: ${previousLesson.title}`\"\r\n            aria-label=\"الدرس السابق\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"w-5 h-5 sm:w-6 sm:h-6\">\r\n              <path fill-rule=\"evenodd\" d=\"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z\" clip-rule=\"evenodd\" />\r\n            </svg>\r\n          </NuxtLink>\r\n          <div v-else class=\"w-11 h-11 sm:w-14 sm:h-14\"></div>\r\n        </div>\r\n\r\n        <!-- Video Player -->\r\n        <div class=\"flex-grow min-w-0\">\r\n          <div v-if=\"youtubeVideoId\" class=\"relative w-full rounded-lg overflow-hidden shadow-lg bg-black h-[250px] sm:h-[350px] md:h-[500px] lg:h-[600px]\">\r\n            <iframe\r\n              :src=\"`https://www.youtube.com/embed/${youtubeVideoId}`\"\r\n              frameborder=\"0\"\r\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\r\n              referrerpolicy=\"strict-origin-when-cross-origin\"\r\n              allowfullscreen\r\n              class=\"absolute inset-0 w-full h-full\"\r\n              title=\"مشغل فيديو الدرس\"\r\n            ></iframe>\r\n          </div>\r\n          <div v-else-if=\"lesson.youtube_url\" class=\"p-4 bg-yellow-100 dark:bg-yellow-900 border border-yellow-300 dark:border-yellow-700 rounded-md text-yellow-800 dark:text-yellow-200 text-sm\">\r\n            <p>تعذر استخلاص معرف الفيديو من الرابط: <code class=\"break-all\">{{ lesson.youtube_url }}</code>.</p>\r\n            <p class=\"mt-1\">قد يكون الرابط غير صحيح أو بتنسيق غير مدعوم.</p>\r\n          </div>\r\n          <div v-else class=\"p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md text-gray-600 dark:text-gray-400 text-sm\">\r\n            <p>لا يوجد رابط يوتيوب متاح لهذا الدرس.</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Next Button -->\r\n        <div class=\"flex-shrink-0\">\r\n          <NuxtLink\r\n            v-if=\"lesson.category_id && nextLesson\"\r\n            :to=\"`/lessons/${nextLesson.id}`\"\r\n            class=\"w-11 h-11 sm:w-14 sm:h-14 flex items-center justify-center rounded-full text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900\"\r\n            :title=\"`الدرس التالي: ${nextLesson.title}`\"\r\n            aria-label=\"الدرس التالي\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"w-5 h-5 sm:w-6 sm:h-6\">\r\n              <path fill-rule=\"evenodd\" d=\"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z\" clip-rule=\"evenodd\" />\r\n            </svg>\r\n          </NuxtLink>\r\n          <div v-else class=\"w-11 h-11 sm:w-14 sm:h-14\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Description -->\r\n      <div class=\"description-section\">\r\n        <h2 class=\"text-2xl font-semibold text-brown-dark dark:text-brown-dark mb-3\">عن الدرس:</h2>\r\n        <div v-if=\"lesson.description\" class=\"prose prose-lg dark:prose-invert max-w-none text-gray-700 dark:text-gray-300\">\r\n          <p class=\"whitespace-pre-wrap\">{{ lesson.description }}</p>\r\n        </div>\r\n        <p v-else class=\"text-gray-500 dark:text-gray-400 italic\">\r\n          لا يوجد وصف متاح لهذا الدرس.\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Linked Books -->\r\n      <div class=\"downloads-section p-5 bg-beige-light dark:bg-cream-gray rounded-lg shadow-sm border border-cream-gray dark:border-gray-700\">\r\n        <h3 class=\"text-lg font-semibold text-brown-dark dark:text-brown-dark mb-4\">ملفات مرتبطة:</h3>\r\n        <div v-if=\"linkedBooks.length > 0\" class=\"flex flex-col sm:flex-row items-start sm:items-center gap-3 flex-wrap\">\r\n          <div v-for=\"book in linkedBooks\" :key=\"book.id\">\r\n            <button\r\n              v-if=\"book.storage_path\"\r\n              @click=\"openPdfModal(book.storage_path, book.title)\"\r\n              class=\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors\"\r\n              :style=\"{ backgroundColor: 'var(--color-olive-green)' }\"\r\n              :title=\"`عرض ${book.title}`\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"w-5 h-5 me-2\" aria-hidden=\"true\" focusable=\"false\">\r\n                <path fill-rule=\"evenodd\" d=\"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 8.75a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 .75-.75Z\" clip-rule=\"evenodd\" />\r\n                <path fill-rule=\"evenodd\" d=\"M9 3.5a.5.5 0 0 0-.5.5v2.75A1.75 1.75 0 0 0 10.25 8.5h2.75a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5h-3ZM11 5.75v1.75a.25.25 0 0 0 .25.25h1.75a.25.25 0 0 0 .25-.25V5.75H11Z\" clip-rule=\"evenodd\" />\r\n              </svg>\r\n              <span>عرض: {{ book.title }} ({{ book.is_research ? 'بحث' : (book.is_transcript ? 'تفريغ' : 'كتاب') }})</span>\r\n            </button>\r\n            <span v-else class=\"text-xs text-gray-400 italic\">({{ book.title }} - لا يوجد ملف مرفق)</span>\r\n          </div>\r\n        </div>\r\n        <p v-else class=\"text-sm text-gray-500 dark:text-gray-400\">\r\n          لا توجد ملفات إضافية متاحة للتحميل لهذا الدرس.\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Comments -->\r\n      <CommentSection\r\n        v-if=\"lessonId !== -1 && lesson\"\r\n        :lesson-id=\"lessonId\"\r\n      />\r\n    </div>\r\n\r\n    <!-- PDF Modal -->\r\n    <ClientOnly>\r\n      <LazyPdfViewerModal\r\n        :show=\"showPdfModal\"\r\n        :storage-path=\"currentPdfPath\"\r\n        :book-title=\"currentPdfTitle\"\r\n        @close=\"closePdfModal\"\r\n      />\r\n    </ClientOnly>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// --- Script section remains exactly the same as the previous version ---\r\n// --- (Fetching logic based on category_id and button styling is already correct) ---\r\nimport { ref, computed, defineAsyncComponent, watchEffect } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport type { Database, Tables } from '~/types/database.types';\r\nimport LoadingSpinner from '~/components/LoadingSpinner.vue';\r\nimport CommentSection from '~/components/CommentSection.vue';\r\nconst LazyPdfViewerModal = defineAsyncComponent(() => import('~/components/PdfViewerModal.vue'));\r\n\r\ntype Lesson = Omit<Tables<'lessons'>, 'audio_url' | 'pdf_transcript_url'>;\r\ntype Book = Tables<'books'>;\r\ntype NavLesson = Pick<Lesson, 'id' | 'title'> | null;\r\n\r\nconst supabase = useSupabaseClient<Database>();\r\nconst route = useRoute();\r\nconst lessonId = computed(() => {\r\n  const id = Number(route.params.id);\r\n  return isNaN(id) ? -1 : id;\r\n});\r\n\r\nconst showPdfModal = ref(false);\r\nconst currentPdfPath = ref<string | null>(null);\r\nconst currentPdfTitle = ref('');\r\n\r\ninterface FetchedData {\r\n  lesson: Lesson | null;\r\n  linkedBooks: Book[];\r\n  previousLesson: NavLesson;\r\n  nextLesson: NavLesson;\r\n}\r\n\r\nconst { data: fetchedData, pending, error, refresh } = await useAsyncData<FetchedData>(\r\n  `lesson-details-catnav-${lessonId.value}`,\r\n  async () => {\r\n    const currentId = lessonId.value;\r\n    if (currentId === -1) {\r\n      throw createError({ statusCode: 400, statusMessage: 'معرف الدرس غير صالح.' });\r\n    }\r\n\r\n    const { data: currentLessonData, error: lessonError } = await supabase\r\n      .from('lessons')\r\n      .select('id, title, description, youtube_url, category_id, course_id, created_at')\r\n      .eq('id', currentId)\r\n      .maybeSingle();\r\n\r\n    if (lessonError) {\r\n      console.error('Error fetching lesson:', lessonError);\r\n      throw createError({ statusCode: 500, statusMessage: `حدث خطأ أثناء تحميل بيانات الدرس.` });\r\n    }\r\n    if (!currentLessonData) {\r\n      throw createError({ statusCode: 404, statusMessage: 'الدرس المطلوب غير موجود.' });\r\n    }\r\n\r\n    let previousLessonData: NavLesson = null;\r\n    let nextLessonData: NavLesson = null;\r\n    let booksData: Book[] = [];\r\n    const currentCategoryId = currentLessonData.category_id;\r\n\r\n    const fetches: Promise<any>[] = [\r\n        supabase\r\n            .from('books')\r\n            .select('id, title, storage_path, is_research, is_transcript')\r\n            .eq('linked_lesson_id', currentId)\r\n    ];\r\n\r\n    if (currentCategoryId !== null) {\r\n        console.log(`Lesson belongs to category ${currentCategoryId}. Fetching prev/next...`);\r\n        fetches.push(\r\n            supabase\r\n                .from('lessons')\r\n                .select('id, title')\r\n                .eq('category_id', currentCategoryId)\r\n                // .filter('course_id', 'is', null) // Optional: Uncomment to exclude course lessons\r\n                .lt('id', currentId)\r\n                .order('id', { ascending: false })\r\n                .limit(1)\r\n                .maybeSingle()\r\n        );\r\n        fetches.push(\r\n            supabase\r\n                .from('lessons')\r\n                .select('id, title')\r\n                .eq('category_id', currentCategoryId)\r\n                // .filter('course_id', 'is', null) // Optional: Uncomment to exclude course lessons\r\n                .gt('id', currentId)\r\n                .order('id', { ascending: true })\r\n                .limit(1)\r\n                .maybeSingle()\r\n        );\r\n    } else {\r\n         console.log('Lesson does not belong to a category. Skipping prev/next fetch.');\r\n    }\r\n\r\n    const results = await Promise.all(fetches);\r\n\r\n    const booksResult = results[0];\r\n    if (booksResult.error) {\r\n      console.error('Error fetching linked books:', booksResult.error.message);\r\n    } else {\r\n      booksData = booksResult.data ?? [];\r\n    }\r\n\r\n    if (currentCategoryId !== null && results.length === 3) {\r\n        const prevResult = results[1];\r\n        const nextResult = results[2];\r\n\r\n        if (prevResult.error) {\r\n             console.error('Error fetching previous lesson by category:', prevResult.error.message);\r\n        } else {\r\n            previousLessonData = prevResult.data;\r\n             console.log('Fetched Previous Lesson Data (Category Nav):', previousLessonData);\r\n        }\r\n\r\n        if (nextResult.error) {\r\n            console.error('Error fetching next lesson by category:', nextResult.error.message);\r\n        } else {\r\n            nextLessonData = nextResult.data;\r\n            console.log('Fetched Next Lesson Data (Category Nav):', nextLessonData);\r\n        }\r\n    }\r\n\r\n    return {\r\n      lesson: currentLessonData,\r\n      linkedBooks: booksData,\r\n      previousLesson: previousLessonData,\r\n      nextLesson: nextLessonData\r\n    };\r\n  },\r\n  {\r\n    watch: [lessonId],\r\n  }\r\n);\r\n\r\nconst lesson = computed(() => fetchedData.value?.lesson ?? null);\r\nconst linkedBooks = computed(() => fetchedData.value?.linkedBooks ?? []);\r\nconst previousLesson = computed(() => fetchedData.value?.previousLesson ?? null);\r\nconst nextLesson = computed(() => fetchedData.value?.nextLesson ?? null);\r\n\r\nconst youtubeVideoId = computed(() => {\r\n   if (!lesson.value?.youtube_url) return null;\r\n  try {\r\n    const regex = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:watch\\?v=|embed\\/|v\\/|.+\\?v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\r\n    const match = lesson.value.youtube_url.match(regex);\r\n    return (match && match[1]) ? match[1] : null;\r\n  } catch (e) {\r\n    console.error('Invalid YouTube URL format:', lesson.value.youtube_url, e);\r\n    return null;\r\n  }\r\n});\r\n\r\nuseHead(computed(() => {\r\n  const title = lesson.value?.title ? `درس: ${lesson.value.title}` : (pending.value ? 'جارٍ التحميل...' : 'تفاصيل الدرس');\r\n  const baseDescription = lesson.value?.description?.substring(0, 100) || `شاهد تفاصيل درس ${lesson.value?.title || ''}.`;\r\n  let linkedItemsDescription = '';\r\n  if (linkedBooks.value.length > 0) {\r\n      const itemTypes = linkedBooks.value\r\n          .map(book => book.is_research ? 'بحث' : (book.is_transcript ? 'تفريغ' : 'كتاب'))\r\n          .join(', ');\r\n      linkedItemsDescription = ` يتضمن ملفات مرتبطة: ${itemTypes}.`;\r\n  }\r\n  const fullDescription = (baseDescription + linkedItemsDescription).substring(0, 160);\r\n\r\n  return {\r\n    title: title,\r\n    meta: [\r\n      { name: 'description', content: fullDescription },\r\n      { property: 'og:title', content: title },\r\n      { property: 'og:description', content: fullDescription },\r\n      { property: 'og:type', content: 'article' },\r\n      { property: 'og:url', content: typeof window !== 'undefined' ? window.location.href : '' },\r\n    ]\r\n  };\r\n}));\r\n\r\nfunction openPdfModal(path: string | null | undefined, title: string | null | undefined) {\r\n  if (path && typeof path === 'string') {\r\n    currentPdfPath.value = path;\r\n    currentPdfTitle.value = title || 'ملف مرتبط';\r\n    showPdfModal.value = true;\r\n  } else {\r\n      console.warn(\"Attempted to open PDF modal with invalid path:\", path);\r\n  }\r\n}\r\n\r\nfunction closePdfModal() {\r\n  showPdfModal.value = false;\r\n}\r\n\r\nwatchEffect(() => {\r\n    console.log('[WatchEffect Debug - Category Nav]');\r\n    console.log('  Current Lesson ID:', lessonId.value);\r\n    console.log('  Lesson Data:', lesson.value);\r\n    console.log('  Lesson Category ID:', lesson.value?.category_id);\r\n    console.log('  Previous Lesson Data:', previousLesson.value);\r\n    console.log('  Next Lesson Data:', nextLesson.value);\r\n    console.log('  Show Buttons Condition:', !!(lesson.value?.category_id && (previousLesson.value || nextLesson.value)));\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Styles remain the same */\r\n.prose :where(p):not(:where([class~=\"not-prose\"] *)) { margin-top: 0.75em; margin-bottom: 0.75em; line-height: 1.7; }\r\ncode { word-break: break-all; font-size: 0.875em; background-color: rgba(0,0,0,0.05); padding: 0.1em 0.3em; border-radius: 0.25rem; }\r\n.dark code { background-color: rgba(255,255,255,0.1); }\r\n</style>"],"names":["_withAsyncContext"],"mappings":"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"}