{"file":"login.vue2.mjs","mappings":";;;;;;;;;;AA8De,sBAAkB;AACjC,UAAM,OAAO,gBAAgB;AACvB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,WAAW,IAAI,EAAE;AACjB,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,UAAU,IAAI,KAAK;AA8BzB,gBAAY,MAAM;AAChB,UAAI,KAAK,OAAO;AAGd,mBAAW,GAAG;AAAA,MAAA;AAAA,IAChB,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex items-center justify-center min-h-[calc(100vh-200px)] py-12 px-4 sm:px-6 lg:px-8\">\r\n    <div class=\"w-full max-w-md space-y-8 bg-white p-8 md:p-10 rounded-lg shadow border border-cream-gray\">\r\n      <div>\r\n        <h2 class=\"mt-6 text-center text-3xl font-bold tracking-tight text-brown-dark\">\r\n          تسجيل الدخول إلى حسابك\r\n        </h2>\r\n      </div>\r\n      <form class=\"mt-8 space-y-6\" @submit.prevent=\"handleLogin\">\r\n        <!-- رسائل الخطأ -->\r\n        <div v-if=\"message\" class=\"text-red-600 text-center text-sm mb-4 p-2 bg-red-100 rounded\">\r\n          {{ message }}\r\n        </div>\r\n\r\n        <div class=\"rounded-md shadow-sm -space-y-px\">\r\n          <div>\r\n            <label for=\"email-address\" class=\"sr-only\">البريد الإلكتروني</label>\r\n            <input id=\"email-address\" name=\"email\" type=\"email\" v-model=\"email\" autocomplete=\"email\" required\r\n                   class=\"relative block w-full appearance-none rounded-none rounded-t-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm\"\r\n                   placeholder=\"البريد الإلكتروني\">\r\n          </div>\r\n          <div>\r\n            <label for=\"password\" class=\"sr-only\">كلمة المرور</label>\r\n            <input id=\"password\" name=\"password\" type=\"password\" v-model=\"password\" autocomplete=\"current-password\" required\r\n                   class=\"relative block w-full appearance-none rounded-none rounded-b-md border border-cream-gray px-3 py-2 text-brown-dark placeholder-gray-500 focus:z-10 focus:border-olive-green focus:outline-none focus:ring-olive-green sm:text-sm\"\r\n                   placeholder=\"كلمة المرور\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex items-center justify-between\">\r\n          <div class=\"text-sm\">\r\n             <NuxtLink to=\"/forgot-password\" class=\"font-medium text-olive-green hover:underline\">          نسيت كلمة المرور؟\r\n           </NuxtLink>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <button type=\"submit\" :disabled=\"loading\"\r\n                  class=\"group relative flex w-full justify-center rounded-md border border-transparent bg-olive-green py-2 px-4 text-sm font-medium text-white hover:bg-opacity-85 focus:outline-none focus:ring-2 focus:ring-olive-green focus:ring-offset-2 disabled:opacity-50\">\r\n             <span v-if=\"loading\" class=\"absolute inset-y-0 left-0 flex items-center pl-3\">\r\n              <svg class=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n                <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n              </svg>\r\n            </span>\r\n            <span :class=\"{ 'opacity-0': loading }\">تسجيل الدخول</span>\r\n          </button>\r\n        </div>\r\n         <div class=\"text-sm text-center\">\r\n          <NuxtLink to=\"/signup\" class=\"font-medium text-olive-green hover:underline\">\r\n            ليس لديك حساب؟ إنشاء حساب جديد\r\n          </NuxtLink>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { useSupabaseClient, navigateTo, useSupabaseUser } from '#imports'\r\n\r\nconst client = useSupabaseClient()\r\nconst user = useSupabaseUser() // للتحقق إذا كان المستخدم مسجلاً بالفعل\r\nconst email = ref('')\r\nconst password = ref('')\r\nconst message = ref('')   // لعرض رسائل الخطأ فقط هنا\r\nconst loading = ref(false)\r\n\r\nconst handleLogin = async () => {\r\n  loading.value = true\r\n  message.value = '' // مسح أي خطأ سابق\r\n\r\n  const { error } = await client.auth.signInWithPassword({\r\n    email: email.value,\r\n    password: password.value,\r\n  })\r\n\r\n  loading.value = false\r\n\r\n  if (error) {\r\n    console.error('Login Error:', error.message)\r\n    message.value = 'البريد الإلكتروني أو كلمة المرور غير صحيحة.' // رسالة خطأ عامة أفضل من عرض الخطأ الفعلي\r\n  } else {\r\n    // نجح تسجيل الدخول\r\n    // وحدة Supabase ستحدث حالة `user` تلقائيًا\r\n    // والهيدر سيتغير تلقائيًا\r\n    // توجيه المستخدم للصفحة الرئيسية أو الملف الشخصي\r\n    await navigateTo('/') // أو '/profile'\r\n  }\r\n}\r\n\r\n// التحقق إذا كان المستخدم مسجلاً بالفعل عند تحميل الصفحة\r\n// إذا كان كذلك، يتم توجيهه مباشرة للصفحة الرئيسية أو الملف الشخصي\r\n// هذا يمنع المستخدم المسجل من رؤية صفحة تسجيل الدخول مرة أخرى\r\nimport { watchEffect } from 'vue' // استيراد watchEffect\r\n\r\nwatchEffect(() => {\r\n  if (user.value) {\r\n    // يمكن إضافة تأخير بسيط إذا أردت إظهار رسالة ترحيب قبل التوجيه\r\n    // console.log('User already logged in, redirecting...')\r\n    navigateTo('/') // أو '/profile'\r\n  }\r\n})\r\n\r\n// تحديد التخطيط (اختياري)\r\n// definePageMeta({\r\n//   layout: 'auth'\r\n// })\r\n</script>\r\n\r\n<style scoped>\r\nbutton:disabled span:first-child {\r\n    left: 0.75rem;\r\n}\r\n</style>"],"version":3}