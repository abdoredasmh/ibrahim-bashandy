{"file":"BookCard.vue2.mjs","mappings":";;;;;;;;;;;;;;AA0HM,UAAA,aAAa,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../components/BookCard.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"book-card group block bg-beige-light dark:bg-cream-gray rounded-lg shadow-md overflow-hidden transition-shadow duration-300 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 cursor-pointer\"\r\n    role=\"link\"\r\n    tabindex=\"0\"\r\n    @click=\"goToBook\"\r\n    @keydown.enter=\"goToBook\"\r\n    @keydown.space.prevent=\"goToBook\"\r\n    :aria-label=\"`عرض تفاصيل كتاب ${book.title}`\"\r\n  >\r\n    <div class=\"flex flex-col h-full\">\r\n      <!-- Book Cover Image Area -->\r\n      <div class=\"relative h-48 bg-cream-gray dark:bg-gray-700 flex items-center justify-center flex-shrink-0\">\r\n        <img\r\n          v-if=\"book.cover_image_url && !imageError\"\r\n          :src=\"book.cover_image_url\"\r\n          :alt=\"`غلاف ${book.title}`\"\r\n          class=\"w-full h-full object-cover\"\r\n          loading=\"lazy\"\r\n          decoding=\"async\"\r\n          @error.stop=\"handleImageError\"\r\n        />\r\n        <!-- Placeholder Icon -->\r\n        <div\r\n          v-else\r\n          class=\"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"text-6xl text-gray-400 dark:text-gray-500 w-12 h-12\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <title>رمز كتاب بديل</title>\r\n            <path d=\"M6 4v16c0 .6.4 1 1 1h13v-2H8V5h12V3H7c-.6 0-1 .4-1 1zm3 2h8v2H9V6zm0 4h8v2H9v-2zm0 4h5v2H9v-2z\"/>\r\n          </svg>\r\n        </div>\r\n\r\n        <!-- Badges -->\r\n        <div v-if=\"book.is_research || book.is_transcript\" class=\"absolute top-2 start-2 flex gap-1\">\r\n          <span\r\n            v-if=\"book.is_research\"\r\n            class=\"badge bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300\"\r\n          >\r\n            بحث\r\n          </span>\r\n          <span\r\n            v-if=\"book.is_transcript\"\r\n            class=\"badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300\"\r\n          >\r\n            تفريغ\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Book Details -->\r\n      <div class=\"p-4 flex flex-col flex-grow\">\r\n        <h3\r\n          class=\"text-lg font-semibold text-brown-dark dark:text-brown-dark mb-2 line-clamp-2 group-hover:text-primary dark:group-hover:text-primary transition-colors duration-200\"\r\n          :title=\"book.title\"\r\n        >\r\n          {{ book.title }}\r\n        </h3>\r\n\r\n        <p\r\n          v-if=\"book.description\"\r\n          class=\"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-3 flex-grow\"\r\n        >\r\n          {{ book.description }}\r\n        </p>\r\n        <!-- Spacer to push actions down if description is short or absent -->\r\n        <div v-else class=\"flex-grow\"></div>\r\n\r\n        <!-- Links/Actions -->\r\n        <div class=\"mt-auto flex flex-col space-y-2\">\r\n          <!-- Link to Original Lesson -->\r\n          <NuxtLink\r\n            v-if=\"book.is_transcript && book.linked_lesson_id\"\r\n            :to=\"`/lessons/${book.linked_lesson_id}`\"\r\n            @click.stop\r\n            class=\"button-secondary\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5 me-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <title>عرض الدرس الأصلي</title>\r\n              <path fill-rule=\"evenodd\" d=\"M12.293 2.293a1 1 0 011.414 0L18 6.586V16a2 2 0 01-2 2H4a2 2 0 01-2-2V4a2 2 0 012-2h8.586a1 1 0 01.707.293zM11 6a1 1 0 00-1 1v3.586l-.293-.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l2-2a1 1 0 10-1.414-1.414L12 10.586V7a1 1 0 00-1-1z\" clip-rule=\"evenodd\" />\r\n            </svg>\r\n            عرض الدرس الأصلي\r\n          </NuxtLink>\r\n\r\n          <!-- View Book Button (using NuxtLink for SPA navigation benefits) -->\r\n          <NuxtLink\r\n            :to=\"`/books/${book.id}`\"\r\n            @click.stop\r\n            class=\"button-primary\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5 me-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n               <title>عرض الكتاب</title>\r\n               <!-- Icon changed slightly for 'open book' feel, but original is fine too -->\r\n               <path fill-rule=\"evenodd\" d=\"M4 2a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm0 2h12v12H4V4zm2 2a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 4a1 1 0 100 2h4a1 1 0 100-2H7z\" clip-rule=\"evenodd\" />\r\n            </svg>\r\n            عرض الكتاب\r\n          </NuxtLink>\r\n\r\n          <p v-if=\"!book.storage_path\" class=\"text-xs text-center text-red-500 dark:text-red-400 mt-1\">\r\n            ملف الكتاب غير متاح حاليًا.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, type PropType } from 'vue';\r\nimport { navigateTo } from '#imports';\r\nimport type { Database } from '~/types/database.types';\r\n\r\ntype Book = Database['public']['Tables']['books']['Row'];\r\n\r\nconst props = defineProps({\r\n  book: {\r\n    type: Object as PropType<Book>,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst imageError = ref(false);\r\n\r\nfunction handleImageError() {\r\n  // Consider logging this error for monitoring\r\n  // console.error(`Failed to load image: ${props.book.cover_image_url}`);\r\n  imageError.value = true;\r\n}\r\n\r\nfunction goToBook() {\r\n  navigateTo(`/books/${props.book.id}`);\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n/* Define reusable component classes using @apply (optional but can be cleaner) */\r\n.badge {\r\n  @apply text-xs font-medium px-2.5 py-0.5 rounded;\r\n}\r\n\r\n.button-base {\r\n @apply inline-flex items-center justify-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-cream-gray transition-colors duration-200 shadow-sm;\r\n /* Ensure buttons are above potential pseudo-elements if any */\r\n position: relative;\r\n z-index: 1;\r\n}\r\n\r\n.button-primary {\r\n  @apply button-base border-transparent text-white bg-primary hover:bg-primary-700 focus:ring-primary-500 dark:text-beige-light dark:bg-primary dark:hover:bg-opacity-80;\r\n   /* Since primary is a CSS var, hover might need adjustment depending on the specific hex values used for 700 */\r\n   /* If primary-700 isn't defined, adjust hover like: dark:hover:brightness-110 */\r\n}\r\n\r\n.button-secondary {\r\n  @apply button-base border-golden-calm text-golden-calm hover:bg-golden-calm hover:text-white dark:border-golden-calm dark:text-golden-calm dark:hover:bg-golden-calm dark:hover:text-gray-900 focus:ring-golden-calm;\r\n}\r\n\r\n/* Optional: Subtle visual cue on card focus/hover */\r\n.book-card:focus,\r\n.book-card:hover {\r\n  /* Example: Slightly lift the card */\r\n  /* transform: translateY(-2px); */\r\n}\r\n\r\n/* Ensure focus outline is visible clearly on dark background for the card itself */\r\n.dark .book-card:focus {\r\n   /* Use a lighter ring color or adjust offset */\r\n  /* focus:ring-offset-gray-900 is already set, which is good */\r\n}\r\n\r\n</style>"],"version":3}